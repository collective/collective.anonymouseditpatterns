define("mockup-patterns-inlinevalidation",["jquery","pat-base"],function(a,e){"use strict";return e.extend({name:"inlinevalidation",trigger:".pat-inlinevalidation",parser:"mockup",render_error:function(e,t){var i=a("div.fieldErrorBox",e);""!==t?(e.addClass("error"),i.html(t)):(e.removeClass("error"),i.html(""))},render_error_bootstrap:function(e,t){var i=a("input",e),e=a(".invalid-feedback",e);""!==t?(i.addClass("is-invalid"),e.length?e.html(t):a('<div class="invalid-feedback">'+t+"</div>").insertAfter(i)):(i.removeClass("is-invalid"),e.length&&e.remove())},append_url_path:function(e,t){var i,n=e.split(/\?/),o=n[0];for("/"!==o[o.length-1]&&(o+="/"),o+=t,i=1;i<n.length;i+=1)o+="?"+n[i];return o},queue:function(e,t){void 0===t&&(t=e,e="fx"),a(window).queue(e,t)},validate_archetypes_field:function(e){var e=a(e),i=e.closest(".field"),t=i.attr("data-uid"),n=i.attr("data-fieldname"),o=e.val(),s=(e.prop("multiple")&&null===o&&(o=a([]).serialize()),a.param({uid:t,fname:n,value:o},!0));i&&t&&n&&this.queue(a.proxy(function(t){a.ajax({type:"POST",url:a("base").attr("href")+"/at_validate_field?"+s,iframe:!1,success:a.proxy(function(e){this.render_error(i,e.errmsg),t()},this),error:function(){t()},dataType:"json"})},this))},validate_formlib_field:function(e){var i=a(e).closest(".field"),n=i.closest("form").clone(),o=i.attr("data-fieldname");n.find("input[type=file]").remove(),this.queue(a.proxy(function(t){n.ajaxSubmit({url:this.append_url_path(n.attr("action"),"@@formlib_validate_field"),data:{fname:o},iframe:!1,success:a.proxy(function(e){this.render_error(i,e.errmsg),t()},this),error:function(){t()},dataType:"json"})},this))},validate_z3cform_field:function(e){var e=a(e),i=e.closest(".field"),t=i.closest("form"),n=t.clone(),o=e.closest("fieldset").attr("data-fieldset"),s=i.attr("data-fieldname");a.each(a("select",t),function(e,t){a('select[name="'+t.name+'"]',n).val(a(t).val())}),n.find("input[type=file]").remove(),s&&this.queue(a.proxy(function(t){n.ajaxSubmit({url:this.append_url_path(n.attr("action"),"@@z3cform_validate_field"),data:{fname:s,fset:o},iframe:!1,success:a.proxy(function(e){i.hasClass("form-group")?this.render_error_bootstrap(i,e.errmsg):this.render_error(i,e.errmsg),t()},this),error:function(){t()},dataType:"json"})},this))},init:function(){this.$el.find('input[type="text"], input[type="password"], input[type="checkbox"], select, textarea').on("blur",a.proxy(function(e){"archetypes"===this.options.type?this.validate_archetypes_field(e.target):"z3c.form"===this.options.type?this.validate_z3cform_field(e.target):"formlib"===this.options.type&&this.validate_formlib_field(e.target)},this))}})}),define("mockup-utils",["jquery"],function(l){"use strict";function e(e){var i=this;return i.className="plone-loader",i.options=l.extend({},{backdrop:null,zIndex:10005},e=e||{}),i.init=function(){i.$el=l("."+i.className),0===i.$el.length&&(i.$el=l("<div><div></div></div>"),i.$el.addClass(i.className).hide().appendTo("body"))},i.show=function(e){i.init(),i.$el.show();var t=i.options.zIndex;"function"==typeof t?t=Math.max(t(),10005):(t=10005,l(".plone-modal-wrapper,.plone-modal-backdrop").each(function(){t=Math.max(t,l(this).css("zIndex")||10005)}),t+=1),i.$el.css("zIndex",t),void 0===e&&(e=!0),i.options.backdrop&&(i.options.backdrop.closeOnClick=e,i.options.backdrop.closeOnEsc=e,i.options.backdrop.init(),i.options.backdrop.show())},i.hide=function(){i.init(),i.$el.hide()},i}function n(e){return(e=void 0===e?"id":e)+Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var t={get:function(e){return window.localStorage&&"string"==typeof(e=window.localStorage[e])?JSON.parse(e):void 0},set:function(e,t){window.localStorage&&(window.localStorage[e]=JSON.stringify(t))}};return{bool:function(e){return"string"==typeof e&&(e=l.trim(e).toLowerCase()),-1===["false",!1,"0",0,"",void 0,null].indexOf(e)},escapeHTML:function(e){return l("<div/>").text(e).html()},removeHTML:function(e){return e.replace(/<[^>]+>/gi,"")},featureSupport:{dragAndDrop:function(){return"draggable"in document.createElement("span")},fileApi:function(){return"undefined"!=typeof FileReader},history:function(){return!(!window.history||!window.history.pushState)}},generateId:n,getAuthenticator:function(){var e=l('input[name="_authenticator"]');return 0===e.length?0<(e=l('a[href*="_authenticator"]')).length?e.attr("href").split("_authenticator=")[1]:"":e.val()},getWindow:function(){var e=window;return e=e.parent!==window?e.parent:e},Loading:e,loading:new e,parseBodyTag:function(e){return l(/<body[^>]*>[^]*<\/body>/im.exec(e)[0].replace("<body","<div").replace("</body>","</div>")).eq(0).html()},QueryHelper:function(e){var r=this;return r.options=l.extend({},{pattern:null,vocabularyUrl:null,searchParam:"SearchableText",pathOperator:"plone.app.querystring.operation.string.path",attributes:["UID","Title","Description","getURL","portal_type"],batchSize:10,baseCriteria:[],sort_on:"is_folderish",sort_order:"reverse",pathDepth:1},e),r.pattern=r.options.pattern,void 0!==r.pattern&&null!==r.pattern||(r.pattern={browsing:!1,basePath:"/"}),r.options.url&&!r.options.vocabularyUrl?r.options.vocabularyUrl=r.options.url:r.pattern.vocabularyUrl&&(r.options.vocabularyUrl=r.pattern.vocabularyUrl),r.valid=Boolean(r.options.vocabularyUrl),r.getBatch=function(e){return{page:e||1,size:r.options.batchSize}},r.getCurrentPath=function(){var e=r.pattern,t=r.currentPath||e.currentPath,t=t="function"==typeof t?t():t;return t=t||e.basePath||e.options.basePath||"/"},r.getCriterias=function(e,t){var i=[];return(t=l.extend({},{useBaseCriteria:!0,additionalCriterias:[]},t=void 0===t?{}:t)).useBaseCriteria&&(i=r.options.baseCriteria.slice(0)),e&&i.push({i:r.options.searchParam,o:"plone.app.querystring.operation.string.contains",v:e+="*"}),t.searchPath?i.push({i:"path",o:r.options.pathOperator,v:t.searchPath+"::"+r.options.pathDepth}):r.pattern.browsing&&i.push({i:"path",o:r.options.pathOperator,v:r.getCurrentPath()+"::"+r.options.pathDepth}),i=i.concat(t.additionalCriterias)},r.getQueryData=function(e,t){e={query:JSON.stringify({criteria:r.getCriterias(e),sort_on:r.options.sort_on,sort_order:r.options.sort_order}),attributes:JSON.stringify(r.options.attributes)};return t&&(e.batch=JSON.stringify(r.getBatch(t))),e},r.getUrl=function(){var e=r.options.vocabularyUrl;return-1===e.indexOf("?")?e+="?":e+="&",e+l.param(r.getQueryData())},r.selectAjax=function(){return{url:r.options.vocabularyUrl,dataType:"JSON",quietMillis:100,data:function(e,t){return r.getQueryData(e,t)},results:function(e,t){t=10*t<e.total;return{results:e.results,more:t}}}},r.search=function(e,t,i,n,o,s){void 0===s&&(s="GET");var a=[],o=((a=(o=void 0===o?!0:o)?r.options.baseCriteria.slice(0):a).push({i:e,o:t,v:i}),{query:JSON.stringify({criteria:a}),attributes:JSON.stringify(r.options.attributes)});l.ajax({url:r.options.vocabularyUrl,dataType:"JSON",data:o,type:s,success:n})},r},setId:function(e,t){void 0===t&&(t="id");var i=void 0===(i=e.attr("id"))?n(t):i.replace(/\./g,"-");return e.attr("id",i),i},storage:t,createElementFromHTML:function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}}}),define("mockup-i18n",["jquery"],function(n){"use strict";return function(){var r=this;r.baseUrl=n("body").attr("data-i18ncatalogurl"),r.currentLanguage=n("html").attr("lang")||"en",1<r.currentLanguage.split("-").length&&(r.currentLanguage=r.currentLanguage.split("-")[0]+"_"+r.currentLanguage.split("-")[1].toUpperCase()),r.storage=null,r.catalogs={},r.ttl=864e5,Date.now||(Date.now=function(){return(new Date).valueOf()});try{"localStorage"in window&&null!==window.localStorage&&"JSON"in window&&null!==window.JSON&&(r.storage=window.localStorage)}catch(e){}r.configure=function(e){for(var t in e)r[t]=e[t]},r._setCatalog=function(e,t,i){e in r.catalogs||(r.catalogs[e]={}),r.catalogs[e][t]=i},r._storeCatalog=function(e,t,i){e=e+"-"+t;null!==r.storage&&null!==i&&(r.storage.setItem(e,JSON.stringify(i)),r.storage.setItem(e+"-updated",Date.now()))},r.getUrl=function(e,t){return r.baseUrl+"?domain="+e+"&language="+t},r.loadCatalog=function(t,i){if(void 0===i&&(i=r.currentLanguage),null!==r.storage){var e=t+"-"+i;if(e in r.storage)if(Date.now()-parseInt(r.storage.getItem(e+"-updated"),10)<r.ttl)return e=JSON.parse(r.storage.getItem(e)),void r._setCatalog(t,i,e)}r.baseUrl&&n.getJSON(r.getUrl(t,i),function(e){null!==e&&(r._setCatalog(t,i,e),r._storeCatalog(t,i,e))})},r.MessageFactory=function(s,a){return a=a||r.currentLanguage,function(e,t){var i,n,o=s in r.catalogs&&a in r.catalogs[s]&&e in r.catalogs[s][a]?r.catalogs[s][a][e]:e;if(t)for(n in t)t.hasOwnProperty(n)&&(i=new RegExp("\\$\\{"+n+"\\}","g"),o=o.replace(i,t[n]));return o}}}}),define("translate",["mockup-i18n"],function(n){"use strict";var o=null;return function(e,t){var i;return null===o&&((i=new n).loadCatalog("widgets"),o=i.MessageFactory("widgets")),o(e,t)}}),function(e){"function"==typeof define&&define.amd?define("picker",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):"object"==typeof window?window.Picker=e(jQuery):this.Picker=e(jQuery)}(function(f){var n=f(window),m=f(document),o=f(document.documentElement),g=null!=document.documentElement.style.transition;function v(o,t,i,e){var n,r,l,s,c,h;return o?(n=!1,r={id:o.id||"P"+Math.abs(~~(Math.random()*new Date)),handlingOpen:!1},l=i?f.extend(!0,{},i.defaults,e):e||{},s=f.extend({},v.klasses(),l.klass),c=f(o),h=(e=function(){return this.start()}).prototype={constructor:e,$node:c,start:function(){var e;return r&&r.start?h:(r.methods={},r.start=!0,r.open=!1,r.type=o.type,o.autofocus=o==S(),o.readOnly=!l.editable,o.id=o.id||r.id,"text"!=o.type&&(o.type="text"),h.component=new i(h,l),h.$root=f('<div class="'+s.picker+'" id="'+o.id+'_root" />'),w(h.$root[0],"hidden",!0),h.$holder=f(a()).appendTo(h.$root),d(),l.formatSubmit&&(!0===l.hiddenName?(e=o.name,o.name=""):e=(e=["string"==typeof l.hiddenPrefix?l.hiddenPrefix:"","string"==typeof l.hiddenSuffix?l.hiddenSuffix:"_submit"])[0]+o.name+e[1],h._hidden=f('<input type=hidden name="'+e+'"'+(c.data("value")||o.value?' value="'+h.get("select",l.formatSubmit)+'"':"")+">")[0],c.on("change."+r.id,function(){h._hidden.value=o.value?h.get("select",l.formatSubmit):""})),c.data(t,h).addClass(s.input).val(c.data("value")?h.get("select",l.format):o.value).on("focus."+r.id+" click."+r.id,function(e){e.preventDefault(),h.open()}).on("mousedown",function(){r.handlingOpen=!0;var e=function(){setTimeout(function(){f(document).off("mouseup",e),r.handlingOpen=!1},0)};f(document).on("mouseup",e)}),l.editable||c.on("keydown."+r.id,p),w(o,{haspopup:!0,expanded:!1,readonly:!1,owns:o.id+"_root"}),l.containerHidden?f(l.containerHidden).append(h._hidden):c.after(h._hidden),l.container?f(l.container).append(h.$root):c.after(h.$root),h.on({start:h.component.onStart,render:h.component.onRender,stop:h.component.onStop,open:h.component.onOpen,close:h.component.onClose,set:h.component.onSet}).on({start:l.onStart,render:l.onRender,stop:l.onStop,open:l.onOpen,close:l.onClose,set:l.onSet}),n=function(e){var t,i="position";e.currentStyle?t=e.currentStyle[i]:window.getComputedStyle&&(t=getComputedStyle(e)[i]);return"fixed"==t}(h.$holder[0]),o.autofocus&&h.open(),h.trigger("start").trigger("render"))},render:function(e){return e?(h.$holder=f(a()),d(),h.$root.html(h.$holder)):h.$root.find("."+s.box).html(h.component.nodes(r.open)),h.trigger("render")},stop:function(){return r.start&&(h.close(),h._hidden&&h._hidden.parentNode.removeChild(h._hidden),h.$root.remove(),c.removeClass(s.input).removeData(t),setTimeout(function(){c.off("."+r.id)},0),o.type=r.type,o.readOnly=!1,h.trigger("stop"),r.methods={},r.start=!1),h},open:function(e){return r.open?h:(c.addClass(s.active),w(o,"expanded",!0),setTimeout(function(){h.$root.addClass(s.opened),w(h.$root[0],"hidden",!1)},0),!1!==e&&(r.open=!0,n&&f("body").css("overflow","hidden").css("padding-right","+="+b()),n&&g?h.$holder.find("."+s.frame).one("transitionend",function(){h.$holder.eq(0).focus()}):setTimeout(function(){h.$holder.eq(0).focus()},0),m.on("click."+r.id+" focusin."+r.id,function(e){var t;r.handlingOpen||(t=y(e,o),e.isSimulated||t==o||t==document||3==e.which||h.close(t===h.$holder[0]))}).on("keydown."+r.id,function(e){var t=e.keyCode,i=h.component.key[t],n=y(e,o);27==t?h.close(!0):n!=h.$holder[0]||!i&&13!=t?f.contains(h.$root[0],n)&&13==t&&(e.preventDefault(),n.click()):(e.preventDefault(),i?v._.trigger(h.component.key.go,h,[v._.trigger(i)]):h.$root.find("."+s.highlighted).hasClass(s.disabled)||(h.set("select",h.component.item.highlight),l.closeOnSelect&&h.close(!0)))})),h.trigger("open"))},close:function(e){return e&&(l.editable?o.focus():(h.$holder.off("focus.toOpen").focus(),setTimeout(function(){h.$holder.on("focus.toOpen",u)},0))),c.removeClass(s.active),w(o,"expanded",!1),setTimeout(function(){h.$root.removeClass(s.opened+" "+s.focused),w(h.$root[0],"hidden",!0)},0),r.open?(r.open=!1,n&&f("body").css("overflow","").css("padding-right","-="+b()),m.off("."+r.id),h.trigger("close")):h},clear:function(e){return h.set("clear",null,e)},set:function(e,t,i){var n,o,s=f.isPlainObject(e),a=s?e:{};if(i=s&&f.isPlainObject(t)?t:i||{},e){for(n in s||(a[e]=t),a)o=a[n],n in h.component.item&&(void 0===o&&(o=null),h.component.set(n,o,i)),"select"!=n&&"clear"!=n||!l.updateInput||c.val("clear"==n?"":h.get(n,l.format)).trigger("change");h.render()}return i.muted?h:h.trigger("set",a)},get:function(e,t){if(null!=r[e=e||"value"])return r[e];if("valueSubmit"==e){if(h._hidden)return h._hidden.value;e="value"}var i;return"value"==e?o.value:e in h.component.item?"string"==typeof t?(i=h.component.get(e))?v._.trigger(h.component.formats.toString,h.component,[t,i]):"":h.component.get(e):void 0},on:function(e,t,i){var n,o,s=f.isPlainObject(e),a=s?e:{};if(e)for(n in s||(a[e]=t),a)o=a[n],r.methods[n=i?"_"+n:n]=r.methods[n]||[],r.methods[n].push(o);return h},off:function(){var e,t=arguments,i=0;for(namesCount=t.length;i<namesCount;i+=1)(e=t[i])in r.methods&&delete r.methods[e];return h},trigger:function(e,t){function i(e){(e=r.methods[e])&&e.map(function(e){v._.trigger(e,h,[t])})}return i("_"+e),i(e),h}},new e):v;function a(){return v._.node("div",v._.node("div",v._.node("div",v._.node("div",h.component.nodes(r.open),s.box),s.wrap),s.frame),s.holder,'tabindex="-1"')}function d(){h.$holder.on({keydown:p,"focus.toOpen":u,blur:function(){c.removeClass(s.target)},focusin:function(e){h.$root.removeClass(s.focused),e.stopPropagation()},"mousedown click":function(e){var t=y(e,o);t!=h.$holder[0]&&(e.stopPropagation(),"mousedown"!=e.type||f(t).is("input, select, textarea, button, option")||(e.preventDefault(),h.$holder.eq(0).focus()))}}).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var e=f(this),t=e.data(),e=e.hasClass(s.navDisabled)||e.hasClass(s.disabled),i=(i=S())&&(i.type||i.href?i:null);(e||i&&!f.contains(h.$root[0],i))&&h.$holder.eq(0).focus(),!e&&t.nav?h.set("highlight",h.component.item.highlight,{nav:t.nav}):!e&&"pick"in t?(h.set("select",t.pick),l.closeOnSelect&&h.close(!0)):t.clear?(h.clear(),l.closeOnClear&&h.close(!0)):t.close&&h.close(!0)})}function u(e){e.stopPropagation(),c.addClass(s.target),h.$root.addClass(s.focused),h.open()}function p(e){var t=e.keyCode,i=/^(8|46)$/.test(t);if(27==t)return h.close(!0),!1;(32==t||i||!r.open&&h.component.key[t])&&(e.preventDefault(),e.stopPropagation(),i?h.clear().close():h.open())}}function b(){if(o.height()<=n.height())return 0;var e=f('<div style="visibility:hidden;width:100px" />').appendTo("body"),t=e[0].offsetWidth;e.css("overflow","scroll");var i=f('<div style="width:100%" />').appendTo(e)[0].offsetWidth;return e.remove(),t-i}function y(e,t){var i=[];return e.path&&(i=e.path),(i=e.originalEvent&&e.originalEvent.path?e.originalEvent.path:i)&&0<i.length?t&&0<=i.indexOf(t)?t:i[0]:e.target}function w(e,t,i){if(f.isPlainObject(t))for(var n in t)s(e,n,t[n]);else s(e,t,i)}function s(e,t,i){e.setAttribute(("role"==t?"":"aria-")+t,i)}function S(){try{return document.activeElement}catch(e){}}return v.klasses=function(e){return{picker:e=e||"picker",opened:e+"--opened",focused:e+"--focused",input:e+"__input",active:e+"__input--active",target:e+"__input--target",holder:e+"__holder",frame:e+"__frame",wrap:e+"__wrap",box:e+"__box"}},v._={group:function(e){for(var t,i="",n=v._.trigger(e.min,e);n<=v._.trigger(e.max,e,[n]);n+=e.i)t=v._.trigger(e.item,e,[n]),i+=v._.node(e.node,t[0],t[1],t[2]);return i},node:function(e,t,i,n){return t?"<"+e+(i=i?' class="'+i+'"':"")+(n=n?" "+n:"")+">"+(t=f.isArray(t)?t.join(""):t)+"</"+e+">":""},lead:function(e){return(e<10?"0":"")+e},trigger:function(e,t,i){return"function"==typeof e?e.apply(t,i||[]):e},digits:function(e){return/\d/.test(e[1])?2:1},isDate:function(e){return-1<{}.toString.call(e).indexOf("Date")&&this.isInteger(e.getDate())},isInteger:function(e){return-1<{}.toString.call(e).indexOf("Number")&&e%1==0},ariaAttr:function(e,t){f.isPlainObject(e)||(e={attribute:t});for(var i in t="",e){var n=("role"==i?"":"aria-")+i,o=e[i];t+=null==o?"":n+'="'+e[i]+'"'}return t}},v.extend=function(n,o){f.fn[n]=function(e,t){var i=this.data(n);return"picker"==e?i:i&&"string"==typeof e?v._.trigger(i[e],i,[t]):this.each(function(){f(this).data(n)||new v(this,n,o,e)})},f.fn[n].defaults=o.defaults},v}),function(e){"function"==typeof define&&define.amd?define("picker.date",["./picker","jquery"],e):"object"==typeof exports?module.exports=e(require("./picker.js"),require("jquery")):e(Picker,jQuery)}(function(e,f){var t,g=e._;function i(t,i){function e(){return s.currentStyle?"rtl"==s.currentStyle.direction:"rtl"==getComputedStyle(t.$root[0]).direction}var n,o=this,s=t.$node[0],a=s.value,r=t.$node.data("value"),a=r||a,r=r?i.formatSubmit:i.format;o.settings=i,o.$node=t.$node,o.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},o.item={},o.item.clear=null,o.item.disable=(i.disable||[]).slice(0),o.item.enable=-(!0===(n=o.item.disable)[0]?n.shift():-1),o.set("min",i.min).set("max",i.max).set("now"),a?o.set("select",a,{format:r,defaultValue:!0}):o.set("select",null).set("highlight",o.item.now),o.key={40:7,38:-7,39:function(){return e()?-1:1},37:function(){return e()?1:-1},go:function(e){var t=o.item.highlight,t=new Date(t.year,t.month,t.date+e);o.set("highlight",t,{interval:e}),this.render()}},t.on("render",function(){t.$root.find("."+i.klass.selectMonth).on("change",function(){var e=this.value;e&&(t.set("highlight",[t.get("view").year,e,t.get("highlight").date]),t.$root.find("."+i.klass.selectMonth).trigger("focus"))}),t.$root.find("."+i.klass.selectYear).on("change",function(){var e=this.value;e&&(t.set("highlight",[e,t.get("view").month,t.get("highlight").date]),t.$root.find("."+i.klass.selectYear).trigger("focus"))})},1).on("open",function(){var e="";o.disabled(o.get("now"))&&(e=":not(."+i.klass.buttonToday+")"),t.$root.find("button"+e+", select").attr("disabled",!1)},1).on("close",function(){t.$root.find("button, select").attr("disabled",!0)},1)}function n(e,t,i){e=e.match(/[^\x00-\x7F]+|\w+/)[0];return i.mm||i.m||(i.m=t.indexOf(e)+1),e.length}function o(e){return e.match(/\w+/)[0].length}i.prototype.set=function(t,i,n){var o=this,e=o.item;return null===i?e[t="clear"==t?"select":t]=i:(e["enable"==t?"disable":"flip"==t?"enable":t]=o.queue[t].split(" ").map(function(e){return i=o[e](t,i,n)}).pop(),"select"==t?o.set("highlight",e.select,n):"highlight"==t?o.set("view",e.highlight,n):t.match(/^(flip|min|max|disable|enable)$/)&&(e.select&&o.disabled(e.select)&&o.set("select",e.select,n),e.highlight&&o.disabled(e.highlight)&&o.set("highlight",e.highlight,n))),o},i.prototype.get=function(e){return this.item[e]},i.prototype.create=function(e,t,i){var n;return(t=void 0===t?e:t)==-1/0||t==1/0?n=t:t=f.isPlainObject(t)&&g.isInteger(t.pick)?t.obj:f.isArray(t)?(t=new Date(t[0],t[1],t[2]),g.isDate(t)?t:this.create().obj):g.isInteger(t)||g.isDate(t)?this.normalize(new Date(t),i):this.now(e,t,i),{year:n||t.getFullYear(),month:n||t.getMonth(),date:n||t.getDate(),day:n||t.getDay(),obj:n||t,pick:n||t.getTime()}},i.prototype.createRange=function(e,t){function i(e){return!0===e||f.isArray(e)||g.isDate(e)?n.create(e):e}var n=this;return g.isInteger(e)||(e=i(e)),g.isInteger(t)||(t=i(t)),g.isInteger(e)&&f.isPlainObject(t)?e=[t.year,t.month,t.date+e]:g.isInteger(t)&&f.isPlainObject(e)&&(t=[e.year,e.month,e.date+t]),{from:i(e),to:i(t)}},i.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},i.prototype.overlapRanges=function(e,t){var i=this;return e=i.createRange(e.from,e.to),t=i.createRange(t.from,t.to),i.withinRange(e,t.from)||i.withinRange(e,t.to)||i.withinRange(t,e.from)||i.withinRange(t,e.to)},i.prototype.now=function(e,t,i){return t=new Date,i&&i.rel&&t.setDate(t.getDate()+i.rel),this.normalize(t,i)},i.prototype.navigate=function(e,t,i){var n,o,s,a=f.isArray(t),r=f.isPlainObject(t),l=this.item.view;if(a||r){for(s=r?(n=t.year,o=t.month,t.date):(n=+t[0],o=+t[1],+t[2]),i&&i.nav&&l&&l.month!==o&&(n=l.year,o=l.month),n=(a=new Date(n,o+(i&&i.nav?i.nav:0),1)).getFullYear(),o=a.getMonth();new Date(n,o,s).getMonth()!==o;)--s;t=[n,o,s]}return t},i.prototype.normalize=function(e){return e.setHours(0,0,0,0),e},i.prototype.measure=function(e,t){return g.isInteger(t)?t=this.now(e,t,{rel:t}):t?"string"==typeof t&&(t=this.parse(e,t)):t="min"==e?-1/0:1/0,t},i.prototype.viewset=function(e,t){return this.create([t.year,t.month,1])},i.prototype.validate=function(e,i,t){var n,o,s,a,r=this,l=i,c=t&&t.interval?t.interval:1,h=-1===r.item.enable,d=r.item.min,u=r.item.max,p=h&&r.item.disable.filter(function(e){var t;return f.isArray(e)&&((t=r.create(e).pick)<i.pick?n=!0:t>i.pick&&(o=!0)),g.isInteger(e)}).length;if((!t||!t.nav&&!t.defaultValue)&&(!h&&r.disabled(i)||h&&r.disabled(i)&&(p||n||o)||!h&&(i.pick<=d.pick||i.pick>=u.pick)))for(h&&!p&&(!o&&0<c||!n&&c<0)&&(c*=-1);r.disabled(i)&&(1<Math.abs(c)&&(i.month<l.month||i.month>l.month)&&(i=l,c=0<c?1:-1),i.pick<=d.pick?(s=!0,c=1,i=r.create([d.year,d.month,d.date+(i.pick===d.pick?0:-1)])):i.pick>=u.pick&&(a=!0,c=-1,i=r.create([u.year,u.month,u.date+(i.pick===u.pick?0:1)])),!s||!a);)i=r.create([i.year,i.month,i.date+c]);return i},i.prototype.disabled=function(t){var i=this,e=(e=i.item.disable.filter(function(e){return g.isInteger(e)?t.day===(i.settings.firstDay?e:e-1)%7:f.isArray(e)||g.isDate(e)?t.pick===i.create(e).pick:f.isPlainObject(e)?i.withinRange(e,t):void 0})).length&&!e.filter(function(e){return f.isArray(e)&&"inverted"==e[3]||f.isPlainObject(e)&&e.inverted}).length;return-1===i.item.enable?!e:e||t.pick<i.item.min.pick||t.pick>i.item.max.pick},i.prototype.parse=function(e,n,t){var o=this,s={};return n&&"string"==typeof n?(t&&t.format||((t=t||{}).format=o.settings.format),o.formats.toArray(t.format).map(function(e){var t=o.formats[e],i=t?g.trigger(t,o,[n,s]):e.replace(/^!/,"").length;t&&(s[e]=n.substr(0,i)),n=n.substr(i)}),[s.yyyy||s.yy,+(s.mm||s.m)-1,s.dd||s.d]):n},i.prototype.formats={d:function(e,t){return e?g.digits(e):t.date},dd:function(e,t){return e?2:g.lead(t.date)},ddd:function(e,t){return e?o(e):this.settings.weekdaysShort[t.day]},dddd:function(e,t){return e?o(e):this.settings.weekdaysFull[t.day]},m:function(e,t){return e?g.digits(e):t.month+1},mm:function(e,t){return e?2:g.lead(t.month+1)},mmm:function(e,t){var i=this.settings.monthsShort;return e?n(e,i,t):i[t.month]},mmmm:function(e,t){var i=this.settings.monthsFull;return e?n(e,i,t):i[t.month]},yy:function(e,t){return e?2:(""+t.year).slice(2)},yyyy:function(e,t){return e?4:t.year},toArray:function(e){return e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(e,t){var i=this;return i.formats.toArray(e).map(function(e){return g.trigger(i.formats[e],i,[0,t])||e.replace(/^!/,"")}).join("")}},i.prototype.isDateExact=function(e,t){return g.isInteger(e)&&g.isInteger(t)||"boolean"==typeof e&&"boolean"==typeof t?e===t:(g.isDate(e)||f.isArray(e))&&(g.isDate(t)||f.isArray(t))?this.create(e).pick===this.create(t).pick:!(!f.isPlainObject(e)||!f.isPlainObject(t))&&(this.isDateExact(e.from,t.from)&&this.isDateExact(e.to,t.to))},i.prototype.isDateOverlap=function(e,t){var i=this.settings.firstDay?1:0;return g.isInteger(e)&&(g.isDate(t)||f.isArray(t))?(e=e%7+i)===this.create(t).day+1:g.isInteger(t)&&(g.isDate(e)||f.isArray(e))?(t=t%7+i)===this.create(e).day+1:!(!f.isPlainObject(e)||!f.isPlainObject(t))&&this.overlapRanges(e,t)},i.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(-1==t.enable?1:-1)},i.prototype.deactivate=function(e,t){var n=this,o=n.item.disable.slice(0);return"flip"==t?n.flipEnable():!1===t?(n.flipEnable(1),o=[]):!0===t?(n.flipEnable(-1),o=[]):t.map(function(e){for(var t,i=0;i<o.length;i+=1)if(n.isDateExact(e,o[i])){t=!0;break}t||(g.isInteger(e)||g.isDate(e)||f.isArray(e)||f.isPlainObject(e)&&e.from&&e.to)&&o.push(e)}),o},i.prototype.activate=function(e,t){var s=this,a=s.item.disable,r=a.length;return"flip"==t?s.flipEnable():!0===t?(s.flipEnable(1),a=[]):!1===t?(s.flipEnable(-1),a=[]):t.map(function(e){for(var t,i,n,o=0;o<r;o+=1){if(i=a[o],s.isDateExact(i,e)){n=!(t=a[o]=null);break}if(s.isDateOverlap(i,e)){f.isPlainObject(e)?(e.inverted=!0,t=e):f.isArray(e)?(t=e)[3]||t.push("inverted"):g.isDate(e)&&(t=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(t)for(o=0;o<r;o+=1)if(s.isDateExact(a[o],e)){a[o]=null;break}if(n)for(o=0;o<r;o+=1)if(s.isDateOverlap(a[o],e)){a[o]=null;break}t&&a.push(t)}),a.filter(function(e){return null!=e})},i.prototype.nodes=function(a){function e(e){return g.node("div"," ",l.klass["nav"+(e?"Next":"Prev")]+(e&&u.year>=m.year&&u.month>=m.month||!e&&u.year<=f.year&&u.month<=f.month?" "+l.klass.navDisabled:""),"data-nav="+(e||-1)+" "+g.ariaAttr({role:"button",controls:r.$node[0].id+"_table"})+' title="'+(e?l.labelMonthNext:l.labelMonthPrev)+'"')}function t(){var t=l.showMonthsShort?l.monthsShort:l.monthsFull;return l.selectMonths?g.node("select",g.group({min:0,max:11,i:1,node:"option",item:function(e){return[t[e],0,"value="+e+(u.month==e?" selected":"")+(u.year==f.year&&e<f.month||u.year==m.year&&e>m.month?" disabled":"")]}}),l.klass.selectMonth,(a?"":"disabled")+" "+g.ariaAttr({controls:r.$node[0].id+"_table"})+' title="'+l.labelMonthSelect+'"'):g.node("div",t[u.month],l.klass.month)}function i(){var e,t,i,n,o=u.year,s=!0===l.selectYears?5:~~(l.selectYears/2);return s?(i=f.year,e=m.year,t=o+s,(s=o-s)<i&&(t+=i-s,s=i),e<t&&(s-=(n=t-e)<(i=s-i)?n:i,t=e),g.node("select",g.group({min:s,max:t,i:1,node:"option",item:function(e){return[e,0,"value="+e+(o==e?" selected":"")]}}),l.klass.selectYear,(a?"":"disabled")+" "+g.ariaAttr({controls:r.$node[0].id+"_table"})+' title="'+l.labelYearSelect+'"')):g.node("div",o,l.klass.year)}var n,o,r=this,l=r.settings,s=r.item,c=s.now,h=s.select,d=s.highlight,u=s.view,p=s.disable,f=s.min,m=s.max,s=(n=(l.showWeekdaysFull?l.weekdaysFull:l.weekdaysShort).slice(0),o=l.weekdaysFull.slice(0),l.firstDay&&(n.push(n.shift()),o.push(o.shift())),g.node("thead",g.node("tr",g.group({min:0,max:6,i:1,node:"th",item:function(e){return[n[e],l.klass.weekdays,'scope=col title="'+o[e]+'"']}}))));return g.node("div",(l.selectYears?i()+t():t()+i())+e()+e(1),l.klass.header)+g.node("table",s+g.node("tbody",g.group({min:0,max:5,i:1,node:"tr",item:function(e){var t=l.firstDay&&0===r.create([u.year,u.month,1]).day?-7:0;return[g.group({min:7*e-u.day+t+1,max:function(){return this.min+7-1},i:1,node:"td",item:function(e){e=r.create([u.year,u.month,e+(l.firstDay?1:0)]);var t,i=h&&h.pick==e.pick,n=d&&d.pick==e.pick,o=p&&r.disabled(e)||e.pick<f.pick||e.pick>m.pick,s=g.trigger(r.formats.toString,r,[l.format,e]);return[g.node("div",e.date,((t=[l.klass.day]).push(u.month==e.month?l.klass.infocus:l.klass.outfocus),c.pick==e.pick&&t.push(l.klass.now),i&&t.push(l.klass.selected),n&&t.push(l.klass.highlighted),o&&t.push(l.klass.disabled),t.join(" ")),"data-pick="+e.pick+" "+g.ariaAttr({role:"gridcell",label:s,selected:!(!i||r.$node.val()!==s)||null,activedescendant:!!n||null,disabled:!!o||null})),"",g.ariaAttr({role:"presentation"})]}})]}})),l.klass.table,'id="'+r.$node[0].id+'_table" '+g.ariaAttr({role:"grid",controls:r.$node[0].id,readonly:!0}))+g.node("div",g.node("button",l.today,l.klass.buttonToday,"type=button data-pick="+c.pick+(a&&!r.disabled(c)?"":" disabled")+" "+g.ariaAttr({controls:r.$node[0].id}))+g.node("button",l.clear,l.klass.buttonClear,"type=button data-clear=1"+(a?"":" disabled")+" "+g.ariaAttr({controls:r.$node[0].id}))+g.node("button",l.close,l.klass.buttonClose,"type=button data-close=true "+(a?"":" disabled")+" "+g.ariaAttr({controls:r.$node[0].id})),l.klass.footer)},i.defaults={labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",close:"Close",closeOnSelect:!0,closeOnClear:!0,updateInput:!0,format:"d mmmm, yyyy",klass:{table:(t=e.klasses().picker+"__")+"table",header:t+"header",navPrev:t+"nav--prev",navNext:t+"nav--next",navDisabled:t+"nav--disabled",month:t+"month",year:t+"year",selectMonth:t+"select--month",selectYear:t+"select--year",weekdays:t+"weekday",day:t+"day",disabled:t+"day--disabled",selected:t+"day--selected",highlighted:t+"day--highlighted",now:t+"day--today",infocus:t+"day--infocus",outfocus:t+"day--outfocus",footer:t+"footer",buttonClear:t+"button--clear",buttonToday:t+"button--today",buttonClose:t+"button--close"}},e.extend("pickadate",i)}),function(e){"function"==typeof define&&define.amd?define("picker.time",["./picker","jquery"],e):"object"==typeof exports?module.exports=e(require("./picker.js"),require("jquery")):e(Picker,jQuery)}(function(e,l){var t,o=1440,p=e._;function i(o,s){var e,t=this,i=o.$node[0].value,n=o.$node.data("value"),i=n||i,n=n?s.formatSubmit:s.format;t.settings=s,t.$node=o.$node,t.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"},t.item={},t.item.clear=null,t.item.interval=s.interval||30,t.item.disable=(s.disable||[]).slice(0),t.item.enable=-(!0===(e=t.item.disable)[0]?e.shift():-1),t.set("min",s.min).set("max",s.max).set("now"),i?t.set("select",i,{format:n}):t.set("select",null).set("highlight",t.item.now),t.key={40:1,38:-1,39:1,37:-1,go:function(e){t.set("highlight",t.item.highlight.pick+e*t.item.interval,{interval:e*t.item.interval}),this.render()}},o.on("render",function(){function e(t,i){n("transform").map(function(e){t.css(e,i)}),n("transition").map(function(e){t.css(e,i)})}var t=o.$root.children(),i=t.find("."+s.klass.viewset),n=function(t){return["webkit","moz","ms","o",""].map(function(e){return(e?"-"+e+"-":"")+t})};i.length&&(e(t,"none"),t[0].scrollTop=~~i.position().top-2*i[0].clientHeight,e(t,""))},1).on("open",function(){o.$root.find("button").attr("disabled",!1)},1).on("close",function(){o.$root.find("button").attr("disabled",!0)},1)}i.prototype.set=function(t,i,n){var o=this,e=o.item;return null===i?e[t="clear"==t?"select":t]=i:(e["enable"==t?"disable":"flip"==t?"enable":t]=o.queue[t].split(" ").map(function(e){return i=o[e](t,i,n)}).pop(),"select"==t?o.set("highlight",e.select,n):"highlight"==t?o.set("view",e.highlight,n):"interval"==t?o.set("min",e.min,n).set("max",e.max,n):t.match(/^(flip|min|max|disable|enable)$/)&&(e.select&&o.disabled(e.select)&&o.set("select",i,n),e.highlight&&o.disabled(e.highlight)&&o.set("highlight",i,n),"min"==t&&o.set("max",e.max,n))),o},i.prototype.get=function(e){return this.item[e]},i.prototype.create=function(e,t,i){var n=this;return p.isDate(t=void 0===t?e:t)&&(t=[t.getHours(),t.getMinutes()]),l.isPlainObject(t)&&p.isInteger(t.pick)?t=t.pick:l.isArray(t)?t=60*+t[0]+ +t[1]:p.isInteger(t)||(t=n.now(e,t,i)),"max"==e&&t<n.item.min.pick&&(t+=o),"min"!=e&&"max"!=e&&(t-n.item.min.pick)%n.item.interval!=0&&(t+=n.item.interval),{hour:~~(24+(t=n.normalize(e,t,i))/60)%24,mins:(60+t%60)%60,time:(o+t)%o,pick:t%o}},i.prototype.createRange=function(e,t){function i(e){return!0===e||l.isArray(e)||p.isDate(e)?n.create(e):e}var n=this;return p.isInteger(e)||(e=i(e)),p.isInteger(t)||(t=i(t)),p.isInteger(e)&&l.isPlainObject(t)?e=[t.hour,t.mins+e*n.settings.interval]:p.isInteger(t)&&l.isPlainObject(e)&&(t=[e.hour,e.mins+t*n.settings.interval]),{from:i(e),to:i(t)}},i.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},i.prototype.overlapRanges=function(e,t){var i=this;return e=i.createRange(e.from,e.to),t=i.createRange(t.from,t.to),i.withinRange(e,t.from)||i.withinRange(e,t.to)||i.withinRange(t,e.from)||i.withinRange(t,e.to)},i.prototype.now=function(e,t){var i,n=this.item.interval,o=new Date,o=60*o.getHours()+o.getMinutes();return o-=o%n,i=t<0&&n*t+o<=-n,o+="min"==e&&i?0:n,p.isInteger(t)&&(o+=n*(i&&"max"!=e?t+1:t)),o},i.prototype.normalize=function(e,t){var i=this.item.interval,n=this.item.min&&this.item.min.pick||0;return t-="min"==e?0:(t-n)%i},i.prototype.measure=function(e,t,i){return"string"==typeof(t=t||("min"==e?[0,0]:[23,59]))?t=this.parse(e,t):!0===t||p.isInteger(t)?t=this.now(e,t,i):l.isPlainObject(t)&&p.isInteger(t.pick)&&(t=this.normalize(e,t.pick,i)),t},i.prototype.validate=function(e,t,i){var n=this,i=(i&&i.interval?i:n.item).interval;return n.disabled(t)&&(t=n.shift(t,i)),t=n.scope(t),t=n.disabled(t)?n.shift(t,-1*i):t},i.prototype.disabled=function(t){var i=this,e=(e=i.item.disable.filter(function(e){return p.isInteger(e)?t.hour==e:l.isArray(e)||p.isDate(e)?t.pick==i.create(e).pick:l.isPlainObject(e)?i.withinRange(e,t):void 0})).length&&!e.filter(function(e){return l.isArray(e)&&"inverted"==e[2]||l.isPlainObject(e)&&e.inverted}).length;return-1===i.item.enable?!e:e||t.pick<i.item.min.pick||t.pick>i.item.max.pick},i.prototype.shift=function(e,t){var i=this,n=i.item.min.pick,o=i.item.max.pick;for(t=t||i.item.interval;i.disabled(e)&&!((e=i.create(e.pick+=t)).pick<=n||e.pick>=o););return e},i.prototype.scope=function(e){var t=this.item.min.pick,i=this.item.max.pick;return this.create(e.pick>i?i:e.pick<t?t:e)},i.prototype.parse=function(e,n,t){var i,o,s,a,r,l=this,c={};if(!n||"string"!=typeof n)return n;for(a in t&&t.format||((t=t||{}).format=l.settings.format),l.formats.toArray(t.format).map(function(e){var t=l.formats[e],i=t?p.trigger(t,l,[n,c]):e.replace(/^!/,"").length;t&&(t=n.substr(0,i),c[e]=t.match(/^\d+$/)?+t:t),n=n.substr(i)}),c)r=c[a],p.isInteger(r)?a.match(/^(h|hh)$/i)?(i=r,"h"!=a&&"hh"!=a||(i%=12)):"i"==a&&(o=r):a.match(/^a$/i)&&r.match(/^p/i)&&("h"in c||"hh"in c)&&(s=!0);return 60*(s?i+12:i)+o},i.prototype.formats={h:function(e,t){return e?p.digits(e):t.hour%12||12},hh:function(e,t){return e?2:p.lead(t.hour%12||12)},H:function(e,t){return e?p.digits(e):""+t.hour%24},HH:function(e,t){return e?p.digits(e):p.lead(t.hour%24)},i:function(e,t){return e?2:p.lead(t.mins)},a:function(e,t){return e?4:t.time%o<720?"a.m.":"p.m."},A:function(e,t){return e?2:t.time%o<720?"AM":"PM"},toArray:function(e){return e.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(e,t){var i=this;return i.formats.toArray(e).map(function(e){return p.trigger(i.formats[e],i,[0,t])||e.replace(/^!/,"")}).join("")}},i.prototype.isTimeExact=function(e,t){return p.isInteger(e)&&p.isInteger(t)||"boolean"==typeof e&&"boolean"==typeof t?e===t:(p.isDate(e)||l.isArray(e))&&(p.isDate(t)||l.isArray(t))?this.create(e).pick===this.create(t).pick:!(!l.isPlainObject(e)||!l.isPlainObject(t))&&(this.isTimeExact(e.from,t.from)&&this.isTimeExact(e.to,t.to))},i.prototype.isTimeOverlap=function(e,t){return p.isInteger(e)&&(p.isDate(t)||l.isArray(t))?e===this.create(t).hour:p.isInteger(t)&&(p.isDate(e)||l.isArray(e))?t===this.create(e).hour:!(!l.isPlainObject(e)||!l.isPlainObject(t))&&this.overlapRanges(e,t)},i.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(-1==t.enable?1:-1)},i.prototype.deactivate=function(e,t){var n=this,o=n.item.disable.slice(0);return"flip"==t?n.flipEnable():!1===t?(n.flipEnable(1),o=[]):!0===t?(n.flipEnable(-1),o=[]):t.map(function(e){for(var t,i=0;i<o.length;i+=1)if(n.isTimeExact(e,o[i])){t=!0;break}t||(p.isInteger(e)||p.isDate(e)||l.isArray(e)||l.isPlainObject(e)&&e.from&&e.to)&&o.push(e)}),o},i.prototype.activate=function(e,t){var s=this,a=s.item.disable,r=a.length;return"flip"==t?s.flipEnable():!0===t?(s.flipEnable(1),a=[]):!1===t?(s.flipEnable(-1),a=[]):t.map(function(e){for(var t,i,n,o=0;o<r;o+=1){if(i=a[o],s.isTimeExact(i,e)){n=!(t=a[o]=null);break}if(s.isTimeOverlap(i,e)){l.isPlainObject(e)?(e.inverted=!0,t=e):l.isArray(e)?(t=e)[2]||t.push("inverted"):p.isDate(e)&&(t=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(t)for(o=0;o<r;o+=1)if(s.isTimeExact(a[o],e)){a[o]=null;break}if(n)for(o=0;o<r;o+=1)if(s.isTimeOverlap(a[o],e)){a[o]=null;break}t&&a.push(t)}),a.filter(function(e){return null!=e})},i.prototype.i=function(e,t){return p.isInteger(t)&&0<t?t:this.item.interval},i.prototype.nodes=function(e){var r=this,l=r.settings,c=r.item.select,h=r.item.highlight,d=r.item.view,u=r.item.disable;return p.node("ul",p.group({min:r.item.min.pick,max:r.item.max.pick,i:r.item.interval,node:"li",item:function(e){var t,i=(e=r.create(e)).pick,n=c&&c.pick==i,o=h&&h.pick==i,s=u&&r.disabled(e),a=p.trigger(r.formats.toString,r,[l.format,e]);return[p.trigger(r.formats.toString,r,[p.trigger(l.formatLabel,r,[e])||l.format,e]),(t=[l.klass.listItem],n&&t.push(l.klass.selected),o&&t.push(l.klass.highlighted),d&&d.pick==i&&t.push(l.klass.viewset),s&&t.push(l.klass.disabled),t.join(" ")),"data-pick="+e.pick+" "+p.ariaAttr({role:"option",label:a,selected:!(!n||r.$node.val()!==a)||null,activedescendant:!!o||null,disabled:!!s||null})]}})+p.node("li",p.node("button",l.clear,l.klass.buttonClear,"type=button data-clear=1"+(e?"":" disabled")+" "+p.ariaAttr({controls:r.$node[0].id})),"",p.ariaAttr({role:"presentation"})),l.klass.list,p.ariaAttr({role:"listbox",controls:r.$node[0].id}))},i.defaults={clear:"Clear",format:"h:i A",interval:30,closeOnSelect:!0,closeOnClear:!0,updateInput:!0,klass:{picker:(t=e.klasses().picker)+" "+t+"--time",holder:t+"__holder",list:t+"__list",listItem:t+"__list-item",disabled:t+"__list-item--disabled",selected:t+"__list-item--selected",highlighted:t+"__list-item--highlighted",viewset:t+"__list-item--viewset",now:t+"__list-item--now",buttonClear:t+"__button--clear"}},e.extend("pickatime",i)}),function(e){define("select2",[],function(){return function(){var o;void 0===(o=jQuery).fn.each2&&o.extend(o.fn,{each2:function(e){for(var t=o([0]),i=-1,n=this.length;++i<n&&(t.context=t[0]=this[i])&&!1!==e.call(t[0],i,t););return this}}),function(v,b){"use strict";var e,t,i,y,o,r,g,c,n,s,a;function l(e){var t=v(document.createTextNode(""));e.before(t),t.before(e),t.remove()}function h(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return n[e]||e})}function d(e,t){for(var i=0,n=t.length;i<n;i+=1)if(u(e,t[i]))return i;return-1}function u(e,t){return e===t||e!==b&&t!==b&&(null!==e&&null!==t&&(e.constructor===String?e+""==t+"":t.constructor===String&&t+""==e+""))}function p(e,t,i){var n,o,s;if(null===e||e.length<1)return[];for(o=0,s=(n=e.split(t)).length;o<s;o+=1)n[o]=i(n[o]);return n}function f(e){return e.outerWidth(!1)-e.width()}function m(t){var i="keyup-change-value";t.on("keydown",function(){v.data(t,i)===b&&v.data(t,i,t.val())}),t.on("keyup",function(){var e=v.data(t,i);e!==b&&t.val()!==e&&(v.removeData(t,i),t.trigger("keyup-change"))})}function w(t,i,n){var o;return n=n||b,function(){var e=arguments;window.clearTimeout(o),o=window.setTimeout(function(){i.apply(n,e)},t)}}function S(e){e.preventDefault(),e.stopPropagation()}function k(e,t,i){var n,o=[],s=v.trim(e.attr("class"));s&&v((s=""+s).split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&o.push(this)}),(s=v.trim(t.attr("class")))&&v((s=""+s).split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(n=i(this))&&o.push(n)}),e.attr("class",o.join(" "))}function x(e,t,i,n){var o=h(e.toUpperCase()).indexOf(h(t.toUpperCase())),t=t.length;o<0?i.push(n(e)):(i.push(n(e.substring(0,o))),i.push("<span class='select2-match'>"),i.push(n(e.substring(o,o+t))),i.push("</span>"),i.push(n(e.substring(o+t,e.length))))}function C(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function T(s){var e,a=null,t=s.quietMillis||100,r=s.url,l=this;return function(o){window.clearTimeout(e),e=window.setTimeout(function(){var e=s.data,t=r,i=s.transport||v.fn.select2.ajaxDefaults.transport,n={type:s.type||"GET",cache:s.cache||!1,jsonpCallback:s.jsonpCallback||b,dataType:s.dataType||"json"},n=v.extend({},v.fn.select2.ajaxDefaults.params,n),e=e?e.call(l,o.term,o.page,o.context):null,t="function"==typeof t?t.call(l,o.term,o.page,o.context):t;a&&"function"==typeof a.abort&&a.abort(),s.params&&(v.isFunction(s.params)?v.extend(n,s.params.call(l)):v.extend(n,s.params)),v.extend(n,{url:t,dataType:s.dataType,data:e,success:function(e){e=s.results(e,o.page,o);o.callback(e)},error:function(e,t,i){o.callback({hasError:!0,jqXHR:e,textStatus:t,errorThrown:i})}}),a=i.call(l,n)},t)}}function O(e){var t,i,n=e,r=function(e){return""+e.text},e=(v.isArray(n)&&(n={results:i=n}),!1===v.isFunction(n)&&(i=n,n=function(){return i}),n());return e.text&&(r=e.text,v.isFunction(r)||(t=e.text,r=function(e){return e[t]})),function(o){var s,a=o.term,i={results:[]};""===a?o.callback(n()):(s=function(e,t){var i,n;if((e=e[0]).children){for(n in i={},e)e.hasOwnProperty(n)&&(i[n]=e[n]);i.children=[],v(e.children).each2(function(e,t){s(t,i.children)}),(i.children.length||o.matcher(a,r(i),e))&&t.push(i)}else o.matcher(a,r(e),e)&&t.push(e)},v(n().results).each2(function(e,t){s(t,i.results)}),o.callback(i))}}function E(t){var s=v.isFunction(t);return function(i){var n=i.term,o={results:[]},e=s?t(i):t;v.isArray(e)&&(v(e).each(function(){var e=this.text!==b,t=e?this.text:this;""!==n&&!i.matcher(n,t)||o.results.push(e?this:{id:this,text:this})}),i.callback(o))}}function D(e,t){if(v.isFunction(e))return 1;if(e){if("string"==typeof e)return 1;throw new Error(t+" must be a string, function, or falsy value")}}function P(e,t){var i;return v.isFunction(e)?(i=Array.prototype.slice.call(arguments,2),e.apply(t,i)):e}function I(){var i=this;v.each(arguments,function(e,t){i[t].remove(),i[t]=null})}function $(e,t){function i(){}return((i.prototype=new e).constructor=i).prototype.parent=e.prototype,i.prototype=v.extend(i.prototype,t),i}window.Select2===b&&(r={x:0,y:0},c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which||e){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case c.SHIFT:case c.CTRL:case c.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return 112<=(e=e.which||e)&&e<=123}},n={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"},a=v(document),s=1,y=function(){return s++},e=$(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(e){var s,t,i,n,o=".select2-results",a=(this.opts=e=this.prepareOpts(e),this.id=e.id,e.element.data("select2")!==b&&null!==e.element.data("select2")&&e.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=v(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=v("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(e.element.attr("id")||"autogen"+y()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",e.element.attr("title")),this.body=v(document.body),k(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",e.element.attr("style")),this.container.css(P(e.containerCss,this.opts.element)),this.container.addClass(P(e.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",S),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),k(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(P(e.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",S),this.results=s=this.container.find(o),this.search=t=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",S),this.results.on("mousemove",function(e){var t=r;t!==b&&t.x===e.pageX&&t.y===e.pageY||v(e.target).trigger("mousemove-filtered",e)}),this.dropdown.on("mousemove-filtered",o,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",o,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",o,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",o,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),a=80,i=this.results,n=w(a,function(e){i.trigger("scroll-debounced",e)}),i.on("scroll",function(e){0<=d(e.target,i.get())&&n(e)}),this.dropdown.on("scroll-debounced",o,this.bind(this.loadMoreIfNeeded)),v(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),v(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),v.fn.mousewheel&&s.mousewheel(function(e,t,i,n){var o=s.scrollTop();0<n&&o-n<=0?(s.scrollTop(0),S(e)):n<0&&s.get(0).scrollHeight-s.scrollTop()+n<=s.height()&&(s.scrollTop(s.get(0).scrollHeight-s.height()),S(e))}),m(t),t.on("keyup-change input paste",this.bind(this.updateResults)),t.on("focus",function(){t.addClass("select2-focused")}),t.on("blur",function(){t.removeClass("select2-focused")}),this.dropdown.on("mouseup",o,this.bind(function(e){0<v(e.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.lastSearchTerm=b,v.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==e.maximumInputLength&&this.search.attr("maxlength",e.maximumInputLength),e.element.prop("disabled")),o=(this.enable(!(a=a===b?!1:a)),e.element.prop("readonly"));this.readonly(o=o===b?!1:o),g=g||((a=v("<div class='select2-measure-scrollbar'></div>")).appendTo(document.body),o={width:a.width()-a[0].clientWidth,height:a.height()-a[0].clientHeight},a.remove(),o),this.autofocus=e.element.prop("autofocus"),e.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",e.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,t=e.data("select2"),i=this;this.close(),e.length&&e[0].detachEvent&&i._sync&&e.each(function(){i._sync&&this.detachEvent("onpropertychange",i._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,t!==b&&(t.container.remove(),t.liveRegion.remove(),t.dropdown.remove(),e.removeData("select2").off(".select2"),e.is("input[type='hidden']")?e.css("display",""):(e.show().prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())),I.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:u(e.attr("locked"),"locked")||u(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(m){var e,t,i,g=this,a=m.element;if("select"===a.get(0).tagName.toLowerCase()&&(this.select=e=m.element),e&&v.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in m)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),m.debug=m.debug||v.fn.select2.defaults.debug,m.debug&&console&&console.warn&&(null!=m.id&&console.warn("Select2: The `id` option has been removed in Select2 4.0.0, consider renaming your `id` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=m.text&&console.warn("Select2: The `text` option has been removed in Select2 4.0.0, consider renaming your `text` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=m.sortResults&&console.warn("Select2: the `sortResults` option has been renamed to `sorter` in Select2 4.0.0. "),null!=m.selectOnBlur&&console.warn("Select2: The `selectOnBlur` option has been renamed to `selectOnClose` in Select2 4.0.0."),null!=m.ajax&&null!=m.ajax.results&&console.warn("Select2: The `ajax.results` option has been renamed to `ajax.processResults` in Select2 4.0.0."),null!=m.formatNoResults&&console.warn("Select2: The `formatNoResults` option has been renamed to `language.noResults` in Select2 4.0.0."),null!=m.formatSearching&&console.warn("Select2: The `formatSearching` option has been renamed to `language.searching` in Select2 4.0.0."),null!=m.formatInputTooShort&&console.warn("Select2: The `formatInputTooShort` option has been renamed to `language.inputTooShort` in Select2 4.0.0."),null!=m.formatInputTooLong&&console.warn("Select2: The `formatInputTooLong` option has been renamed to `language.inputTooLong` in Select2 4.0.0."),null!=m.formatLoading&&console.warn("Select2: The `formatLoading` option has been renamed to `language.loadingMore` in Select2 4.0.0."),null!=m.formatSelectionTooBig&&console.warn("Select2: The `formatSelectionTooBig` option has been renamed to `language.maximumSelected` in Select2 4.0.0."),m.element.data("select2Tags")&&console.warn("Select2: The `data-select2-tags` attribute has been renamed to `data-tags` in Select2 4.0.0.")),null!=m.element.data("tags")&&(i=m.element.data("tags"),v.isArray(i)||(i=[]),m.element.data("select2Tags",i)),null!=m.sorter&&(m.sortResults=m.sorter),null!=m.selectOnClose&&(m.selectOnBlur=m.selectOnClose),null!=m.ajax&&v.isFunction(m.ajax.processResults)&&(m.ajax.results=m.ajax.processResults),null!=m.language&&(i=m.language,v.isFunction(i.noMatches)&&(m.formatNoMatches=i.noMatches),v.isFunction(i.searching)&&(m.formatSearching=i.searching),v.isFunction(i.inputTooShort)&&(m.formatInputTooShort=i.inputTooShort),v.isFunction(i.inputTooLong)&&(m.formatInputTooLong=i.inputTooLong),v.isFunction(i.loadingMore)&&(m.formatLoading=i.loadingMore),v.isFunction(i.maximumSelected)&&(m.formatSelectionTooBig=i.maximumSelected)),"function"!=typeof(m=v.extend({},{populateResults:function(e,t,d){var u=this.opts.id,p=this.liveRegion,f=function(e,t,i){for(var n,o,s,a,r,l=[],c=0,h=(e=m.sortResults(e,t,d)).length;c<h;c+=1)a=!(r=!0===(n=e[c]).disabled)&&u(n)!==b,o=n.children&&0<n.children.length,(s=v("<li></li>")).addClass("select2-results-dept-"+i),s.addClass("select2-result"),s.addClass(a?"select2-result-selectable":"select2-result-unselectable"),r&&s.addClass("select2-disabled"),o&&s.addClass("select2-result-with-children"),s.addClass(g.opts.formatResultCssClass(n)),s.attr("role","presentation"),(a=v(document.createElement("div"))).addClass("select2-result-label"),a.attr("id","select2-result-label-"+y()),a.attr("role","option"),(r=m.formatResult(n,a,d,g.opts.escapeMarkup))!==b&&(a.html(r),s.append(a)),o&&((r=v("<ul></ul>")).addClass("select2-result-sub"),f(n.children,r,i+1),s.append(r)),s.data("select2-data",n),l.push(s[0]);t.append(l),p.text(m.formatMatches(e.length))};f(t,e,0)}},v.fn.select2.defaults,m)).id&&(t=m.id,m.id=function(e){return e[t]}),v.isArray(m.element.data("select2Tags"))){if("tags"in m)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+m.element.attr("id");m.tags=m.element.data("select2Tags")}if(e?(m.query=this.bind(function(n){var e,i={results:[],more:!1},o=n.term,s=function(e,t){var i;e.is("option")?n.matcher(o,e.text(),e)&&t.push(g.optionToData(e)):e.is("optgroup")&&(i=g.optionToData(e),e.children().each2(function(e,t){s(t,i.children)}),0<i.children.length&&t.push(i))},t=a.children();(t=this.getPlaceholder()!==b&&0<t.length&&(e=this.getPlaceholderOption())?t.not(e):t).each2(function(e,t){s(t,i.results)}),n.callback(i)}),m.id=function(e){return e.id}):"query"in m||("ajax"in m?((i=m.element.data("ajax-url"))&&0<i.length&&(m.ajax.url=i),m.query=T.call(m.element,m.ajax)):"data"in m?m.query=O(m.data):"tags"in m&&(m.query=E(m.tags),m.createSearchChoice===b&&(m.createSearchChoice=function(e){return{id:v.trim(e),text:v.trim(e)}}),m.initSelection===b&&(m.initSelection=function(e,t){var i=[];v(p(e.val(),m.separator,m.transformVal)).each(function(){var e={id:this,text:this},t=m.tags;v.isFunction(t)&&(t=t()),v(t).each(function(){if(u(this.id,e.id))return e=this,!1}),i.push(e)}),t(i)}))),"function"!=typeof m.query)throw"query function not defined for Select2 "+m.element.attr("id");if("top"===m.createSearchChoicePosition)m.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===m.createSearchChoicePosition)m.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof m.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return m},monitorSource:function(){var e,t=this.opts.element,i=this;t.on("change.select2",this.bind(function(e){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),this._sync=this.bind(function(){var e=t.prop("disabled"),e=(this.enable(!(e=e===b?!1:e)),t.prop("readonly"));this.readonly(e=e===b?!1:e),this.container&&(k(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(P(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(k(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(P(this.opts.dropdownCssClass,this.opts.element)))}),t.length&&t[0].attachEvent&&t.each(function(){this.attachEvent("onpropertychange",i._sync)}),(e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==b&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new e(function(e){v.each(e,i._sync)}),this.propertyObserver.observe(t.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){e=v.Event("select2-selecting",{val:this.id(e),object:e,choice:e});return this.opts.element.trigger(e),!e.isDefaultPrevented()},triggerChange:function(e){e=v.extend({},e=e||{},{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",!e),this.close(),this.enabledInterface=e,!0)},enable:function(e){this._enabled!==(e=e===b||e)&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){this._readonly!==(e=e!==b&&e)&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,t,i=this.dropdown,n=this.container,o=n.offset(),s=n.outerHeight(!1),a=n.outerWidth(!1),r=i.outerHeight(!1),l=v(window),c=l.width(),h=l.height(),d=l.scrollLeft()+c,h=l.scrollTop()+h,u=o.top+s,p=o.left,h=u+r<=h,f=o.top-r>=l.scrollTop(),m=i.outerWidth(!1);i.hasClass("select2-drop-above")?(e=!0,!f&&h&&(e=!(t=!0))):(e=!1,!h&&f&&(e=t=!0)),t&&(i.hide(),o=this.container.offset(),s=this.container.outerHeight(!1),a=this.container.outerWidth(!1),r=i.outerHeight(!1),d=l.scrollLeft()+c,l.scrollTop(),u=o.top+s,p=o.left,m=i.outerWidth(!1),i.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(h=v(".select2-results",i)[0],i.addClass("select2-drop-auto-width"),i.css("width",""),a<(m=i.outerWidth(!1)+(h.scrollHeight===h.clientHeight?0:g.width))?a=m:m=a,r=i.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(u-=(f=this.body.offset()).top,p-=f.left),t={left:p=!(p+m<=d)&&o.left+d+n.outerWidth(!1)>m?o.left+this.container.outerWidth(!1)-m:p,width:a},e?(this.container.addClass("select2-drop-above"),i.addClass("select2-drop-above"),r=i.outerHeight(!1),t.top=o.top-r,t.bottom="auto"):(t.top=u,t.bottom="auto",this.container.removeClass("select2-drop-above"),i.removeClass("select2-drop-above")),t=v.extend(t,P(this.opts.dropdownCss,this.opts.element)),i.css(t)},shouldOpen:function(){var e;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(e=v.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),a.on("mousemove.select2Event",function(e){r.x=e.pageX,r.y=e.pageY}),!0)},opening:function(){var i,e=this.containerEventName,t="scroll."+e,n="resize."+e,o="orientationchange."+e,s=(this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0===(i=v("#select2-drop-mask")).length&&((i=v(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),i.hide(),i.appendTo(this.body),i.on("mousedown touchstart click",function(e){l(i);var t=v("#select2-drop");0<t.length&&((t=t.data("select2")).opts.selectOnBlur&&t.selectHighlighted({noFocus:!0}),t.close(),e.preventDefault(),e.stopPropagation())})),this.dropdown.prev()[0]!==i[0]&&this.dropdown.before(i),v("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),i.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this);this.container.parents().add(window).each(function(){v(this).on(n+" "+t+" "+o,function(e){s.opened()&&s.positionDropdown()})})},close:function(){var e,t,i,n;this.opened()&&(e=this.containerEventName,t="scroll."+e,i="resize."+e,n="orientationchange."+e,this.container.parents().add(window).each(function(){v(this).off(t).off(i).off(n)}),this.clearDropdownAlignmentPreference(),v("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),a.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.search.removeAttr("aria-activedescendant"),this.opts.element.trigger(v.Event("select2-close")))},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},prefillNextSearchTerm:function(){var e;return""===this.search.val()&&((e=this.opts.nextSearchTerm(this.data(),this.lastSearchTerm))!==b&&(this.search.val(e),this.search.select(),!0))},getMaximumSelectionSize:function(){return P(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var e,t,i,n,o=this.results,s=this.highlight();s<0||(0==s?o.scrollTop(0):(i=this.findHighlightableChoices().find(".select2-result-label"),t=(n=((e=v(i[s])).offset()||{}).top||0)+e.outerHeight(!0),s===i.length-1&&0<(s=o.find("li.select2-more-results")).length&&(t=s.offset().top+s.outerHeight(!0)),(i=o.offset().top+o.outerHeight(!1))<t&&o.scrollTop(o.scrollTop()+(t-i)),(s=n-o.offset().top)<0&&"none"!=e.css("display")&&o.scrollTop(o.scrollTop()+s)))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var t=this.findHighlightableChoices(),i=this.highlight();-1<i&&i<t.length;){var n=v(t[i+=e]);if(n.hasClass("select2-result-selectable")&&!n.hasClass("select2-disabled")&&!n.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(e){var t=this.findHighlightableChoices();if(0===arguments.length)return d(t.filter(".select2-highlighted")[0],t.get());(e=e>=t.length?t.length-1:e)<0&&(e=0),this.removeHighlight(),(t=v(t[e])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",t.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(t.text()),(e=t.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(e),choice:e})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var t,e=v(e.target).closest(".select2-result-selectable");0<e.length&&!e.is(".select2-highlighted")?(t=this.findHighlightableChoices(),this.highlight(t.index(e))):0==e.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t=this.results,i=t.find("li.select2-more-results"),n=this.resultsPage+1,o=this,s=this.search.val(),a=this.context;0!==i.length&&i.offset().top-t.offset().top-t.height()<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:s,page:n,context:a,matcher:this.opts.matcher,callback:this.bind(function(e){o.opened()&&(o.opts.populateResults.call(this,t,e.results,{term:s,page:n,context:a}),o.postprocessResults(e,!1,!1),!0===e.more?(i.detach().appendTo(t).html(o.opts.escapeMarkup(P(o.opts.formatLoadMore,o.opts.element,n+1))),window.setTimeout(function(){o.loadMoreIfNeeded()},10)):i.remove(),o.positionDropdown(),o.resultsPage=n,o.context=e.context,this.opts.element.trigger({type:"select2-loaded",items:e}))})}))},tokenize:function(){},updateResults:function(i){var n,o=this.search,s=this.results,a=this.opts,r=this,e=o.val(),t=v.data(this.container,"select2-last-term");function l(){o.removeClass("select2-active"),r.positionDropdown(),s.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?r.liveRegion.text(s.text()):r.liveRegion.text(r.opts.formatMatches(s.find('.select2-result-selectable:not(".select2-selected")').length))}function c(e){s.html(e),l()}!0!==i&&t&&u(e,t)||(v.data(this.container,"select2-last-term",e),(!0===i||!1!==this.showSearchInput&&this.opened())&&(n=++this.queryCount,1<=(t=this.getMaximumSelectionSize())&&(e=this.data(),v.isArray(e)&&e.length>=t&&D(a.formatSelectionTooBig,"formatSelectionTooBig"))?c("<li class='select2-selection-limit'>"+P(a.formatSelectionTooBig,a.element,t)+"</li>"):o.val().length<a.minimumInputLength?(D(a.formatInputTooShort,"formatInputTooShort")?c("<li class='select2-no-results'>"+P(a.formatInputTooShort,a.element,o.val(),a.minimumInputLength)+"</li>"):c(""),i&&this.showSearch&&this.showSearch(!0)):a.maximumInputLength&&o.val().length>a.maximumInputLength?D(a.formatInputTooLong,"formatInputTooLong")?c("<li class='select2-no-results'>"+P(a.formatInputTooLong,a.element,o.val(),a.maximumInputLength)+"</li>"):c(""):(a.formatSearching&&0===this.findHighlightableChoices().length&&c("<li class='select2-searching'>"+P(a.formatSearching,a.element)+"</li>"),o.addClass("select2-active"),this.removeHighlight(),(e=this.tokenize())!=b&&null!=e&&o.val(e),this.resultsPage=1,a.query({element:a.element,term:o.val(),page:this.resultsPage,context:null,matcher:a.matcher,callback:this.bind(function(e){var t;n==this.queryCount&&(this.opened()?e.hasError!==b&&D(a.formatAjaxError,"formatAjaxError")?c("<li class='select2-ajax-error'>"+P(a.formatAjaxError,a.element,e.jqXHR,e.textStatus,e.errorThrown)+"</li>"):(this.context=e.context===b?null:e.context,this.opts.createSearchChoice&&""!==o.val()&&(t=this.opts.createSearchChoice.call(r,o.val(),e.results))!==b&&null!==t&&r.id(t)!==b&&null!==r.id(t)&&0===v(e.results).filter(function(){return u(r.id(this),r.id(t))}).length&&this.opts.createSearchChoicePosition(e.results,t),0===e.results.length&&D(a.formatNoMatches,"formatNoMatches")?(c("<li class='select2-no-results'>"+P(a.formatNoMatches,a.element,o.val())+"</li>"),this.showSearch&&this.showSearch(o.val())):(s.empty(),r.opts.populateResults.call(this,s,e.results,{term:o.val(),page:this.resultsPage,context:null}),!0===e.more&&D(a.formatLoadMore,"formatLoadMore")&&(s.append("<li class='select2-more-results'>"+a.escapeMarkup(P(a.formatLoadMore,a.element,this.resultsPage))+"</li>"),window.setTimeout(function(){r.loadMoreIfNeeded()},10)),this.postprocessResults(e,i),l(),this.opts.element.trigger({type:"select2-loaded",items:e}))):this.search.removeClass("select2-active"))})}))))},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var i;(i=this.search)[0]!==document.activeElement&&window.setTimeout(function(){var e=i[0],t=i.val().length;i.focus(),(0<e.offsetWidth||0<e.offsetHeight)&&e===document.activeElement&&(e.setSelectionRange?e.setSelectionRange(t,t):e.createTextRange&&((t=e.createTextRange()).collapse(!1),t.select()))},0)},selectHighlighted:function(e){var t,i;this._touchMoved?this.clearTouchMoved():(t=this.highlight(),(i=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data"))?(this.highlight(t),this.onSelect(i,e)):e&&e.noFocus&&this.close())},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==b?e.text():b)},getPlaceholderOption:function(){var e;if(this.select)return e=this.select.children("option").first(),this.opts.placeholderOption!==b?"first"===this.opts.placeholderOption&&e||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select):""===v.trim(e.text())&&""===e.val()?e:void 0},initContainerWidth:function(){var e=function(){var e,t,i,n,o;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"!==this.opts.width&&"resolve"!==this.opts.width)return v.isFunction(this.opts.width)?this.opts.width():this.opts.width;if("string"==typeof(e=this.opts.element.attr("style")))for(n=0,o=(t=e.split(";")).length;n<o;n+=1)if(null!==(i=t[n].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&1<=i.length)return i[1];return"resolve"===this.opts.width?0<(e=this.opts.element.css("width")).indexOf("%")?e:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}.call(this);null!==e&&this.container.css("width",e)}}),t=$(e,{createContainer:function(){return v(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var e,t;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(e=this.search.get(0)).createTextRange?((t=e.createTextRange()).collapse(!1),t.select()):e.setSelectionRange&&(t=this.search.val().length,e.setSelectionRange(t,t))),this.prefillNextSearchTerm(),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(v.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){v("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),I.call(this,"selection","focusser")},initContainer:function(){var t,e=this.container,i=this.dropdown,n=y(),n=(this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=e.find(".select2-choice"),this.focusser=e.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+n),this.focusser.attr("aria-labelledby","select2-chosen-"+n),this.results.attr("id","select2-results-"+n),this.search.attr("aria-owns","select2-results-"+n),this.focusser.attr("id","s2id_autogen"+n),e=v("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.focusser.prev().text(e.text()).attr("for",this.focusser.attr("id")),this.opts.element.attr("title"));this.opts.element.attr("title",n||e.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(v("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode)if(e.which===c.PAGE_UP||e.which===c.PAGE_DOWN)S(e);else switch(e.which){case c.UP:case c.DOWN:return this.moveHighlight(e.which===c.UP?-1:1),void S(e);case c.ENTER:return this.selectHighlighted(),void S(e);case c.TAB:return void this.selectHighlighted({noFocus:!0});case c.ESC:return this.cancel(e),void S(e)}})),this.search.on("blur",this.bind(function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.results&&1<this.results.length&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==c.TAB&&!c.isControl(e)&&!c.isFunctionKey(e)&&e.which!==c.ESC){if(!1!==this.opts.openOnEnter||e.which!==c.ENTER)return e.which==c.DOWN||e.which==c.UP||e.which==c.ENTER&&this.opts.openOnEnter?e.altKey||e.ctrlKey||e.shiftKey||e.metaKey?void 0:(this.open(),void S(e)):void(e.which!=c.DELETE&&e.which!=c.BACKSPACE||(this.opts.allowClear&&this.clear(),S(e)));S(e)}})),m(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){0<=this.opts.minimumResultsForSearch&&(e.stopPropagation(),this.opened()||this.open())})),t.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),(e=e).preventDefault(),e.stopImmediatePropagation(),this.close(),this.selection&&this.selection.focus())})),t.on("mousedown touchstart",this.bind(function(e){l(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(v.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),S(e)})),i.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){S(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(v.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(v.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(v.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(e){var t,i=this.selection.data("select2-data");i&&(t=v.Event("select2-clearing"),this.opts.element.trigger(t),t.isDefaultPrevented()||(t=this.getPlaceholderOption(),this.opts.element.val(t?t.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==e&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))))},initSelection:function(){var t;this.isPlaceholderOptionSelected()?(this.updateSelection(null),this.close(),this.setPlaceholder()):(t=this).opts.initSelection.call(null,this.opts.element,function(e){e!==b&&null!==e&&(t.updateSelection(e),t.close(),t.setPlaceholder(),t.lastSearchTerm=t.search.val())})},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==b&&((e=this.getPlaceholderOption())!==b&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===b||null===this.opts.element.val())},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(e,t){e=e.find("option").filter(function(){return this.selected&&!this.disabled});t(i.optionToData(e))}:"data"in a&&(a.initSelection=a.initSelection||function(e,t){var o=e.val(),s=null;a.query({matcher:function(e,t,i){var n=u(o,a.id(i));return n&&(s=i),n},callback:v.isFunction(t)?function(){t(s)}:v.noop})}),a},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===b?b:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();!this.isPlaceholderOptionSelected()||e===b||this.select&&this.getPlaceholderOption()===b||(this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear"))},postprocessResults:function(e,t,i){var n=0,o=this;this.findHighlightableChoices().each2(function(e,t){if(u(o.id(t.data("select2-data")),o.opts.element.val()))return n=e,!1}),!1!==i&&(!0===t&&0<=n?this.highlight(n):this.highlight(0)),!0===t&&0<=(i=this.opts.minimumResultsForSearch)&&this.showSearch(function i(e){var n=0;return v.each(e,function(e,t){t.children?n+=i(t.children):n++}),n}(e.results)>=i)},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),v(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(e,t){var i,n;this.triggerSelect(e)&&(i=this.opts.element.val(),n=this.data(),this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.lastSearchTerm=this.search.val(),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),u(i,this.id(e))||this.triggerChange({added:e,removed:n}))},updateSelection:function(e){var t,i=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),i.empty(),(t=null!==e?this.opts.formatSelection(e,i,this.opts.escapeMarkup):t)!==b&&i.append(t),(t=this.opts.formatSelectionCssClass(e,i))!==b&&i.addClass(t),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==b&&this.container.addClass("select2-allowclear")},val:function(){var e,t=!1,i=null,n=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],1<arguments.length&&(t=arguments[1],this.opts.debug&&console&&console.warn&&console.warn('Select2: The second option to `select2("val")` is not supported in Select2 4.0.0. The `change` event will always be triggered in 4.0.0.')),this.select)this.opts.debug&&console&&console.warn&&console.warn('Select2: Setting the value on a <select> using `select2("val")` is no longer supported in 4.0.0. You can use the `.val(newValue).trigger("change")` method provided by jQuery instead.'),this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return i=n.optionToData(t),!1}),this.updateSelection(i),this.setPlaceholder(),t&&this.triggerChange({added:i,removed:o});else if(e||0===e){if(this.opts.initSelection===b)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){n.opts.element.val(e?n.id(e):""),n.updateSelection(e),n.setPlaceholder(),t&&n.triggerChange({added:e,removed:o})})}else this.clear(t)},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var t,i=!1;if(0===arguments.length)return t=(t=this.selection.data("select2-data"))==b?null:t;this.opts.debug&&console&&console.warn&&console.warn('Select2: The `select2("data")` method can no longer set selected values in 4.0.0, consider using the `.val()` method instead.'),1<arguments.length&&(i=arguments[1]),e?(t=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:t})):this.clear(i)}}),i=$(e,{createContainer:function(){return v(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var l=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===l.element.get(0).tagName.toLowerCase()?l.initSelection=function(e,t){var i=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){i.push(n.optionToData(t))}),t(i)}:"data"in l&&(l.initSelection=l.initSelection||function(e,s){var a=p(e.val(),l.separator,l.transformVal),r=[];l.query({matcher:function(e,t,i){var n=v.grep(a,function(e){return u(e,l.id(i))}).length;return n&&r.push(i),n},callback:v.isFunction(s)?function(){for(var e=[],t=0;t<a.length;t++)for(var i=a[t],n=0;n<r.length;n++){var o=r[n];if(u(i,l.id(o))){e.push(o),r.splice(n,1);break}}s(e)}:v.noop})}),l},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){v("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),I.call(this,"searchContainer","selection")},initContainer:function(){var l,e=".select2-choices",t=(this.searchContainer=this.container.find(".select2-search-field"),this.selection=l=this.container.find(e),this);this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(e){t.search[0].focus(),t.selectChoice(v(this))}),this.search.attr("id","s2id_autogen"+y()),this.search.prev().text(v("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||!this.isInterfaceEnabled()||this.opened()||this.open()})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var t,i,n,o=l.find(".select2-search-choice-focus"),s=o.prev(".select2-search-choice:not(.select2-locked)"),a=o.next(".select2-search-choice:not(.select2-locked)"),r=(r=this.search,i=t=0,"selectionStart"in(r=v(r)[0])?(t=r.selectionStart,i=r.selectionEnd-t):"selection"in document&&(r.focus(),n=document.selection.createRange(),i=document.selection.createRange().text.length,n.moveStart("character",-r.value.length),t=n.text.length-i),{offset:t,length:i});if(!o.length||e.which!=c.LEFT&&e.which!=c.RIGHT&&e.which!=c.BACKSPACE&&e.which!=c.DELETE&&e.which!=c.ENTER)if((e.which!==c.BACKSPACE||1!=this.keydowns)&&e.which!=c.LEFT||0!=r.offset||r.length){if(this.selectChoice(null),this.opened())switch(e.which){case c.UP:case c.DOWN:return this.moveHighlight(e.which===c.UP?-1:1),void S(e);case c.ENTER:return this.selectHighlighted(),void S(e);case c.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case c.ESC:return this.cancel(e),void S(e)}if(e.which!==c.TAB&&!c.isControl(e)&&!c.isFunctionKey(e)&&e.which!==c.BACKSPACE&&e.which!==c.ESC){if(e.which===c.ENTER){if(!1===this.opts.openOnEnter)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),e.which!==c.PAGE_UP&&e.which!==c.PAGE_DOWN||S(e),e.which===c.ENTER&&S(e)}}else this.selectChoice(l.find(".select2-search-choice:not(.select2-locked)").last()),S(e);else n=o,e.which==c.LEFT&&s.length?n=s:e.which==c.RIGHT?n=a.length?a:null:e.which===c.BACKSPACE?this.unselect(o.first())&&(this.search.width(10),n=s.length?s:a):e.which==c.DELETE?this.unselect(o.first())&&(this.search.width(10),n=a.length?a:null):e.which==c.ENTER&&(n=null),this.selectChoice(n),S(e),n&&n.length||this.open()}})),this.search.on("keyup",this.bind(function(e){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(v.Event("select2-blur"))})),this.container.on("click",e,this.bind(function(e){!this.isInterfaceEnabled()||0<v(e.target).closest(".select2-search-choice").length||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(v.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault())})),this.container.on("focus",e,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(v.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){var t;""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),!this.select&&""===this.opts.element.val()||(t=this).opts.initSelection.call(null,this.opts.element,function(e){e!==b&&null!==e&&(t.updateSelection(e),t.close(),t.clearSearch())})},clearSearch:function(){var e=this.getPlaceholder(),t=this.getMaxSearchWidth();e!==b&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(0<t?t:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.prefillNextSearchTerm(),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(v.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var t={},i=[],n=this;v(e).each(function(){n.id(this)in t||(t[n.id(this)]=0,i.push(this))}),this.selection.find(".select2-search-choice").remove(),this.addSelectedChoice(i),n.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=b&&(this.search.val(e),0<e.length&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.lastSearchTerm=this.search.val(),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),!this.opts.closeOnSelect&&0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.prefillNextSearchTerm()&&this.updateResults(),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(e){var t=this.getVal(),i=this;v(e).each(function(){t.push(i.createChoice(this))}),this.setVal(t)},createChoice:function(e){var t=!e.locked,i=v("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),n=v("<li class='select2-search-choice select2-locked'><div></div></li>"),i=t?i:n,n=this.id(e),o=this.opts.formatSelection(e,i.find("div"),this.opts.escapeMarkup);return o!=b&&i.find("div").replaceWith(v("<div></div>").html(o)),(o=this.opts.formatSelectionCssClass(e,i.find("div")))!=b&&i.addClass(o),t&&i.find(".select2-search-choice-close").on("mousedown",S).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(this.unselect(v(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),S(e),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),i.data("select2-data",e),i.insertBefore(this.searchContainer),n},unselect:function(e){var t,i,n=this.getVal();if(0===(e=e.closest(".select2-search-choice")).length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(t=e.data("select2-data")){var o=v.Event("select2-removing");if(o.val=this.id(t),o.choice=t,this.opts.element.trigger(o),o.isDefaultPrevented())return!1;for(;0<=(i=d(this.id(t),n));)n.splice(i,1),this.setVal(n),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}),!0}},postprocessResults:function(e,t,i){var n=this.getVal(),o=this.results.find(".select2-result"),s=this.results.find(".select2-result-with-children"),a=this;o.each2(function(e,t){0<=d(a.id(t.data("select2-data")),n)&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),s.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&!1!==i&&!0===this.opts.closeOnSelect&&a.highlight(0),!this.opts.createSearchChoice&&0<!o.filter(".select2-result:not(.select2-selected)").length&&(e&&(e.more||0!==this.results.find(".select2-no-results").length)||D(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+P(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>"))},getMaxSearchWidth:function(){return this.selection.width()-f(this.search)},resizeSearch:function(){var e,t,i,n=f(this.search);t=this.search,o||(i=t[0].currentStyle||window.getComputedStyle(t[0],null),(o=v(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),v(document.body).append(o)),o.text(t.val()),i=o.width()+10,t=this.search.offset().left,(t=(t=(t=(e=this.selection.width())-(t-this.selection.offset().left)-n)<i?e-n:t)<40?e-n:t)<=0&&(t=i),this.search.width(Math.floor(t))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:p(e=this.opts.element.val(),this.opts.separator,this.opts.transformVal)},setVal:function(e){var t,i;this.select?this.select.val(e):(t=[],i={},v(e).each(function(){this in i||(t.push(this),i[this]=0)}),this.opts.element.val(0===t.length?"":t.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),i=0;i<t.length;i++)for(var n=0;n<e.length;n++)if(u(this.opts.id(t[i]),this.opts.id(e[n]))){t.splice(i,1),i--,e.splice(n,1);break}return{added:t,removed:e}},val:function(e,i){var n,o=this;if(0===arguments.length)return this.getVal();if((n=this.data()).length||(n=[]),e||0===e){if(this.setVal(e),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(n,this.data()));else{if(this.opts.initSelection===b)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var t=v.map(e,o.id);o.setVal(t),o.updateSelection(e),o.clearSearch(),i&&o.triggerChange(o.buildChangeDetails(n,o.data()))})}this.clearSearch()}else this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),i&&this.triggerChange({added:this.data(),removed:n})},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],t=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(t.opts.id(v(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e,t){var i,n,o=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map(function(){return v(this).data("select2-data")}).get();n=this.data(),i=v.map(e=e||[],function(e){return o.opts.id(e)}),this.setVal(i),this.updateSelection(e),this.clearSearch(),t&&this.triggerChange(this.buildChangeDetails(n,this.data()))}}),v.fn.select2=function(){var e,t,i,n,o=Array.prototype.slice.call(arguments,0),s=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],a=["opened","isFocused","container","dropdown"],r=["val","data"],l={search:"externalSearch"};return this.each(function(){if(0===o.length||"object"==typeof o[0])(t=0===o.length?{}:v.extend({},o[0])).element=v(this),"select"===t.element.get(0).tagName.toLowerCase()?n=t.element.prop("multiple"):(n=t.multiple||!1,"tags"in t&&(t.multiple=n=!0)),(e=new(n?window.Select2.class.multi:window.Select2.class.single)).init(t);else{if("string"!=typeof o[0])throw"Invalid arguments to select2 plugin: "+o;if(d(o[0],s)<0)throw"Unknown method: "+o[0];if(i=b,(e=v(this).data("select2"))!==b)return t=o[0],i="container"===t?e.container:"dropdown"===t?e.dropdown:e[t=l[t]?l[t]:t].apply(e,o.slice(1)),!(0<=d(o[0],a)||0<=d(o[0],r)&&1==o.length)&&void 0}}),i===b?this:i},v.fn.select2.defaults={debug:!1,width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i,n){var o=[];return x(this.text(e),i.term,o,n),o.join("")},transformVal:function(e){return v.trim(e)},formatSelection:function(e,t,i){return e?i(this.text(e)):b},sortResults:function(e,t,i){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,t){return b},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==b?null:e.id},text:function(e){return e&&this.data&&this.data.text?v.isFunction(this.data.text)?this.data.text(e):e[this.data.text]:e.text},matcher:function(e,t){return 0<=h(""+t).toUpperCase().indexOf(h(""+e).toUpperCase())},separator:",",tokenSeparators:[],tokenizer:function(e,t,i,n){var o,s,a,r,l,c=e,h=!1;if(!n.createSearchChoice||!n.tokenSeparators||n.tokenSeparators.length<1)return b;for(;;){for(s=-1,a=0,r=n.tokenSeparators.length;a<r&&(l=n.tokenSeparators[a],!(0<=(s=e.indexOf(l))));a++);if(s<0)break;if(o=e.substring(0,s),e=e.substring(s+l.length),0<o.length&&(o=n.createSearchChoice.call(this,o,t))!==b&&null!==o&&n.id(o)!==b&&null!==n.id(o)){for(h=!1,a=0,r=t.length;a<r;a++)if(u(n.id(o),n.id(t[a]))){h=!0;break}h||i(o)}}return c!==e?e:void 0},escapeMarkup:C,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,t){return b},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!("ontouchstart"in window||0<navigator.msMaxTouchPoints)||!(e.opts.minimumResultsForSearch<0)}},v.fn.select2.locales=[],v.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,i){return"Loading failed"},formatInputTooShort:function(e,t){t-=e.length;return"Please enter "+t+" or more character"+(1==t?"":"s")},formatInputTooLong:function(e,t){e=e.length-t;return"Please delete "+e+" character"+(1==e?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results…"},formatSearching:function(){return"Searching…"}},v.extend(v.fn.select2.defaults,v.fn.select2.locales.en),v.fn.select2.ajaxDefaults={transport:v.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:T,local:O,tags:E},util:{debounce:w,markMatch:x,escapeMarkup:C,stripDiacritics:h},class:{abstract:e,single:t,multi:i}})}(jQuery)}.apply(e,arguments)})}(this),function(e){define("jquery.event.drag",["jquery"],function(){return function(){var u,p,n,f,t,o;(u=jQuery).fn.drag=function(e,t,i){var n="string"==typeof e?e:"",o=u.isFunction(e)?e:u.isFunction(t)?t:null;return 0!==n.indexOf("drag")&&(n="drag"+n),i=(e==o?t:i)||{},o?this.bind(n,i,o):this.trigger(n)},p=u.event,n=p.special,(f=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(e){var i=u.data(this,f.datakey),n=e.data||{};i.related+=1,u.each(f.defaults,function(e,t){void 0!==n[e]&&(i[e]=n[e])})},remove:function(){--u.data(this,f.datakey).related},setup:function(){var e;u.data(this,f.datakey)||(e=u.extend({related:0},f.defaults),u.data(this,f.datakey,e),p.add(this,"touchstart mousedown",f.init,e),this.attachEvent&&this.attachEvent("ondragstart",f.dontstart))},teardown:function(){(u.data(this,f.datakey)||{}).related||(u.removeData(this,f.datakey),p.remove(this,"touchstart mousedown",f.init),f.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",f.dontstart))},init:function(e){if(!f.touched){var t,i=e.data;if(!(0!=e.which&&0<i.which&&e.which!=i.which)&&!u(e.target).is(i.not)&&(!i.handle||u(e.target).closest(i.handle,e.currentTarget).length)&&(f.touched="touchstart"==e.type?this:null,i.propagates=1,i.mousedown=this,i.interactions=[f.interaction(this,i)],i.target=e.target,i.pageX=e.pageX,i.pageY=e.pageY,i.dragging=null,t=f.hijack(e,"draginit",i),i.propagates))return(t=f.flatten(t))&&t.length&&(i.interactions=[],u.each(t,function(){i.interactions.push(f.interaction(this,i))})),i.propagates=i.interactions.length,!1!==i.drop&&n.drop&&n.drop.handler(e,i),f.textselect(!1),f.touched?p.add(f.touched,"touchmove touchend",f.handler,i):p.add(document,"mousemove mouseup",f.handler,i),!(!f.touched||i.live)&&void 0}},interaction:function(e,t){t=u(e)[t.relative?"position":"offset"]()||{top:0,left:0};return{drag:e,callback:new f.callback,droppable:[],offset:t}},handler:function(e){var t=e.data;switch(e.type){case!t.dragging&&"touchmove":e.preventDefault();case!t.dragging&&"mousemove":if(Math.pow(e.pageX-t.pageX,2)+Math.pow(e.pageY-t.pageY,2)<Math.pow(t.distance,2))break;e.target=t.target,f.hijack(e,"dragstart",t),t.propagates&&(t.dragging=!0);case"touchmove":e.preventDefault();case"mousemove":if(t.dragging){if(f.hijack(e,"drag",t),t.propagates){!1!==t.drop&&n.drop&&n.drop.handler(e,t);break}e.type="mouseup"}default:f.touched?p.remove(f.touched,"touchmove touchend",f.handler):p.remove(document,"mousemove mouseup",f.handler),t.dragging&&(!1!==t.drop&&n.drop&&n.drop.handler(e,t),f.hijack(e,"dragend",t)),f.textselect(!0),!1===t.click&&t.dragging&&u.data(t.mousedown,"suppress.click",(new Date).getTime()+5),t.dragging=f.touched=!1}},hijack:function(i,n,o,e,t){if(o){var s,a,r,l={event:i.originalEvent,type:i.type},c=n.indexOf("drop")?"drag":"drop",h=e||0,d=isNaN(e)?o.interactions.length:e;i.type=n,i.originalEvent=null,o.results=[];do{if(a=o.interactions[h]){if("dragend"!==n&&a.cancelled)continue;r=f.properties(i,o,a),a.results=[],u(t||a[c]||o.droppable).each(function(e,t){if(r.target=t,!(i.isPropagationStopped=function(){return!1})===(s=t?p.dispatch.call(t,i,r):null)?("drag"==c&&(a.cancelled=!0,--o.propagates),"drop"==n&&(a[c][e]=null)):"dropinit"==n&&a.droppable.push(f.element(s)||t),"dragstart"==n&&(a.proxy=u(f.element(s)||a.drag)[0]),a.results.push(s),delete i.result,"dropinit"!==n)return s}),o.results[h]=f.flatten(a.results),"dropinit"==n&&(a.droppable=f.flatten(a.droppable)),"dragstart"!=n||a.cancelled||r.update()}}while(++h<d);return i.type=l.type,i.originalEvent=l.event,f.flatten(o.results)}},properties:function(e,t,i){var n=i.callback;return n.drag=i.drag,n.proxy=i.proxy||i.drag,n.startX=t.pageX,n.startY=t.pageY,n.deltaX=e.pageX-t.pageX,n.deltaY=e.pageY-t.pageY,n.originalX=i.offset.left,n.originalY=i.offset.top,n.offsetX=n.originalX+n.deltaX,n.offsetY=n.originalY+n.deltaY,n.drop=f.flatten((i.drop||[]).slice()),n.available=f.flatten((i.droppable||[]).slice()),n},element:function(e){if(e&&(e.jquery||1==e.nodeType))return e},flatten:function(e){return u.map(e,function(e){return e&&e.jquery?u.makeArray(e):e&&e.length?f.flatten(e):e})},textselect:function(e){u(document)[e?"unbind":"bind"]("selectstart",f.dontstart).css("MozUserSelect",e?"":"none"),document.unselectable=e?"off":"on"},dontstart:function(){return!1},callback:function(){}}).callback.prototype={update:function(){n.drop&&this.available.length&&u.each(this.available,function(e){n.drop.locate(this,e)})}},t=p.dispatch,p.dispatch=function(e){if(!(0<u.data(this,"suppress."+e.type)-(new Date).getTime()))return t.apply(this,arguments);u.removeData(this,"suppress."+e.type)},o=p.fixHooks.touchstart=p.fixHooks.touchmove=p.fixHooks.touchend=p.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(i,e){var n;return e&&(n=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0]||null)&&u.each(o.props,function(e,t){i[t]=n[t]}),i}}}.apply(e,arguments)})}(this),function(e){define("jquery.event.drop",["jquery"],function(){return function(){var u,p,f;return(u=jQuery).fn.drop=function(e,t,i){var n="string"==typeof e?e:"",o=u.isFunction(e)?e:u.isFunction(t)?t:null;return 0!==n.indexOf("drop")&&(n="drop"+n),i=(e==o?t:i)||{},o?this.bind(n,i,o):this.trigger(n)},u.drop=function(e){f.multi=!0===(e=e||{}).multi?1/0:!1===e.multi?1:(isNaN(e.multi)?f:e).multi,f.delay=e.delay||f.delay,f.tolerance=u.isFunction(e.tolerance)?e.tolerance:null===e.tolerance?null:f.tolerance,f.mode=e.mode||f.mode||"intersect"},p=u.event.special,f=u.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:!0,add:function(e){u.data(this,f.datakey).related+=1},remove:function(){--u.data(this,f.datakey).related},setup:function(){u.data(this,f.datakey)||(u.data(this,f.datakey,{related:0,active:[],anyactive:0,winner:0,location:{}}),f.targets.push(this))},teardown:function(){var t;(u.data(this,f.datakey)||{}).related||(u.removeData(this,f.datakey),t=this,f.targets=u.grep(f.targets,function(e){return e!==t}))},handler:function(e,t){var i;if(t)switch(e.type){case"mousedown":case"touchstart":i=u(f.targets),(i="string"==typeof t.drop?i.filter(t.drop):i).each(function(){var e=u.data(this,f.datakey);e.active=[],e.anyactive=0,e.winner=0}),t.droppable=i,p.drag.hijack(e,"dropinit",t);break;case"mousemove":case"touchmove":f.event=e,f.timer||f.tolerate(t);break;case"mouseup":case"touchend":f.timer=clearTimeout(f.timer),t.propagates&&(p.drag.hijack(e,"drop",t),p.drag.hijack(e,"dropend",t))}},locate:function(e,t){var i=u.data(e,f.datakey),n=u(e),o=n.offset()||{},s=n.outerHeight(),n=n.outerWidth(),n={elem:e,width:n,height:s,top:o.top,left:o.left,right:o.left+n,bottom:o.top+s};return i&&(i.location=n,i.index=t,i.elem=e),n},contains:function(e,t){return(t[0]||t.left)>=e.left&&(t[0]||t.right)<=e.right&&(t[1]||t.top)>=e.top&&(t[1]||t.bottom)<=e.bottom},modes:{intersect:function(e,t,i){return this.contains(i,[e.pageX,e.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(e,t,i){return Math.max(0,Math.min(i.bottom,t.bottom)-Math.max(i.top,t.top))*Math.max(0,Math.min(i.right,t.right)-Math.max(i.left,t.left))},fit:function(e,t,i){return this.contains(i,t)?1:0},middle:function(e,t,i){return this.contains(i,[t.left+.5*t.width,t.top+.5*t.height])?1:0}},sort:function(e,t){return t.winner-e.winner||e.index-t.index},tolerate:function(e){var t,i,n,o,s,a,r,l=0,c=e.interactions.length,h=[f.event.pageX,f.event.pageY],d=f.tolerance||f.modes[f.mode];do{if(r=e.interactions[l]){if(!r)return;r.drop=[],o=[],s=r.droppable.length,d&&(i=f.locate(r.proxy)),t=0;do{if(a=r.droppable[t]){if(!(a=(n=u.data(a,f.datakey)).location))continue;n.winner=d?d.call(f,f.event,i,a):f.contains(a,h)?1:0,o.push(n)}}while(++t<s);for(o.sort(f.sort),t=0;(n=o[t])&&(n.winner&&r.drop.length<f.multi?(n.active[l]||n.anyactive||(!1!==p.drag.hijack(f.event,"dropstart",e,l,n.elem)[0]?(n.active[l]=1,n.anyactive+=1):n.winner=0),n.winner&&r.drop.push(n.elem)):n.active[l]&&1==n.anyactive&&(p.drag.hijack(f.event,"dropend",e,l,n.elem),n.active[l]=0,--n.anyactive)),++t<s;);}}while(++l<c);f.last&&h[0]==f.last.pageX&&h[1]==f.last.pageY?delete f.timer:f.timer=setTimeout(function(){f.tolerate(e)},f.delay),f.last=f.event}},p.dropinit=p.dropstart=p.dropend=f,$.drop}.apply(e,arguments)})}(this),define("mockup-patterns-select2",["jquery","pat-base","mockup-utils","select2","jquery.event.drag","jquery.event.drop"],function(r,e,l){"use strict";return e.extend({name:"select2",trigger:".pat-select2",parser:"mockup",defaults:{separator:","},initializeValues:function(){var o=this;o.options.initialValues&&(o.options.id=function(e){return e.id},o.options.initSelection=function(e,t){var i=[],e=e.val(),n=o.options.initialValues;"string"==typeof o.options.initialValues&&""!==o.options.initialValues&&("{"===o.options.initialValues[0]?n=JSON.parse(o.options.initialValues):(n={},r(o.options.initialValues.split(o.options.separator)).each(function(){var e=this.split(":"),t=r.trim(e[0]),e=r.trim(e[1]);n[t]=e}))),r(e.split(o.options.separator)).each(function(){var e=this;n[this]&&(e=n[this]),i.push({id:l.removeHTML(this),text:l.removeHTML(e)})}),t(i)})},initializeTags:function(){var e=this;e.options.tags&&"string"==typeof e.options.tags&&("["===e.options.tags.substr(0,1)?e.options.tags=JSON.parse(e.options.tags):e.options.tags=e.options.tags.split(e.options.separator)),e.options.tags&&!e.options.allowNewItems&&(e.options.data=r.map(e.options.tags,function(e,t){return{id:e,text:e}}),e.options.multiple=!0,delete e.options.tags)},initializeOrdering:function(){var i,n=this;n.options.orderable&&(i=function(e,t){return e?e.text:void 0},n.options.formatSelection&&(i=n.options.formatSelection),n.options.formatSelection=function(e,t){return t.parents("li").drag("start",function(e,t){return r(this).addClass("select2-choice-dragging"),n.$el.select2("onSortStart"),r.drop({tolerance:function(e,t,i){var n=e.pageY>i.top+i.height/2;return r.data(i.elem,"drop+reorder",n?"insertAfter":"insertBefore"),this.contains(i,[e.pageX,e.pageY])}}),r(this).clone().addClass("dragging").css({opacity:.75,position:"absolute"}).appendTo(document.body)}).drag(function(e,t){r(t.proxy).css({top:t.offsetY,left:t.offsetX});var i=t.drop[0],n=r.data(i||{},"drop+reorder");!i||i==t.current&&n==t.method||(r(this)[n](i),t.current=i,t.method=n,t.update())}).drag("end",function(e,t){r(this).removeClass("select2-choice-dragging"),n.$el.select2("onSortEnd"),r(t.proxy).remove()}).drop("init",function(e,t){return this!=t.drag}),i(e,t)})},initializeSelect2:function(){var i=this;function t(e,t){e&&(i.options.debug&&console.debug("callback",e,t),(e="string"==typeof e?window[e]:e)(t))}i.options.formatResultCssClass=function(e){if(e.id)return"select2-option-"+e.id.toLowerCase().replace(/[ \:\)\(\[\]\{\}\_\+\=\&\*\%\#]/g,"-")},i.$el.select2(i.options),i.$el.on("select2-selected",function(e){t(i.options.onSelected,e)}),i.$el.on("select2-selecting",function(e){t(i.options.onSelecting,e)}),i.$el.on("select2-deselecting",function(e){t(i.options.onDeselecting,e)}),i.$el.on("select2-deselected",function(e){t(i.options.onDeselected,e)}),i.$select2=i.$el.parent().find(".select2-container"),i.$el.parent().off("close.plone-modal.patterns"),i.options.orderable&&i.$select2.addClass("select2-orderable")},opened:function(){return 1===r(".select2-dropdown-open",this.$el.parent()).length},init:function(){var s,e,t,i,a=this;a.options.allowNewItems=!a.options.hasOwnProperty("allowNewItems")||JSON.parse(a.options.allowNewItems),a.options.ajax||a.options.vocabularyUrl?(a.options.vocabularyUrl&&(a.options.multiple=void 0===a.options.multiple||a.options.multiple,a.options.ajax=a.options.ajax||{},a.options.ajax.url=a.options.vocabularyUrl,a.options.initSelection=function(e,t){var i=[],e=e.val();r(e.split(a.options.separator)).each(function(){var e=l.removeHTML(this);i.push({id:e,text:e})}),t(i)}),s="",a.options.ajax=r.extend({quietMillis:300,data:function(e,t){return{query:s=e,page_limit:10,page:t}},results:function(e,t){var i,n,o=e.results;return a.options.vocabularyUrl&&(i=[],r.each(e.results,function(e,t){i.push(t.id)}),o=[],n=""===s||0<=r.inArray(s,i),a.options.allowNewItems&&!n&&(s=l.removeHTML(s),o.push({id:s,text:s})),r.each(e.results,function(e,t){o.push(t)})),{results:o}}},a.options.ajax)):a.options.multiple&&a.$el.is("select")&&(e=a.$el.val()||[],t=r.map(a.$el.find("option"),function(e){return{text:r(e).html(),id:e.value}}),(i=r('<input type="hidden" />')).val(e.join(a.options.separator)),i.attr("class",a.$el.attr("class")),i.attr("name",a.$el.attr("name")),i.attr("id",a.$el.attr("id")),a.$orig=a.$el,a.$el.replaceWith(i),a.$el=i,a.options.data=t),a.initializeValues(),a.initializeTags(),a.initializeOrdering(),a.initializeSelect2()}})}),define("mockup-patterns-pickadate",["jquery","pat-base","mockup-utils","translate","picker","picker.date","picker.time","mockup-patterns-select2"],function(s,e,a,t){"use strict";return e.extend({name:"pickadate",trigger:".pat-pickadate",parser:"mockup",defaults:{separator:" ",date:{selectYears:!0,selectMonths:!0,formatSubmit:"yyyy-mm-dd",format:"yyyy-mm-dd",labelMonthNext:t("Next month"),labelMonthPrev:t("Previous month"),labelMonthSelect:t("Select a month"),labelYearSelect:t("Select a year"),clear:!1,close:!1,today:!1},time:{clear:!1},today:t("Today"),clear:t("Clear"),timezone:null,autoSetTimeOnDateChange:"+[0,0]",classWrapperName:"pattern-pickadate-wrapper",classSeparatorName:"pattern-pickadate-separator",classDateName:"pattern-pickadate-date",classDateWrapperName:"pattern-pickadate-date-wrapper",classTimeName:"pattern-pickadate-time",classTimeWrapperName:"pattern-pickadate-time-wrapper",classTimezoneName:"pattern-pickadate-timezone",classTimezoneWrapperName:"pattern-pickadate-timezone-wrapper",classClearName:"pattern-pickadate-clear",classNowName:"pattern-pickadate-now",placeholderDate:t("Enter date..."),placeholderTime:t("Enter time..."),placeholderTimezone:t("Enter timezone...")},parseTimeOffset:function(t){var e,i,n,o=void 0;0===t.indexOf("+")?t=t.split(o="+")[1]:0===t.indexOf("-")&&(t=t.split(o="-")[1]);try{t=JSON.parse(t)}catch(e){t=void 0}return!1!==t&&(!0===t||!0!==Array.isArray(t)?[0,0]:(e=parseInt(t[0],10)||0,t=parseInt(t[1],10)||0,"+"!==o&&"-"!==o||(i=(n=new Date).getHours(),n=n.getMinutes(),"+"===o?(23<(e=i+e)&&(e=23),59<(t=n+t)&&(t=59)):"-"===o&&((e=i-e)<0&&(e=0),(t=n-t)<0&&(t=0))),[e,t]))},init:function(){var t,i=this,e=i.$el.val().split(" "),n=e[0]||"",o=e[1]||"";!1===a.bool(i.options.date)&&(i.options.date=!1),!1===a.bool(i.options.time)&&(i.options.time=!1),i.options.autoSetTimeOnDateChange=i.parseTimeOffset(i.options.autoSetTimeOnDateChange),!1===i.options.date&&(o=e[0]),i.$el.hide(),i.$wrapper=s("<div/>").addClass(i.options.classWrapperName).insertAfter(i.$el),!1!==i.options.date&&(i.$date=s('<input type="text"/>').attr("placeholder",i.options.placeholderDate).attr("data-value",n).addClass(i.options.classDateName).appendTo(s("<div/>").addClass(i.options.classDateWrapperName).appendTo(i.$wrapper)).pickadate(s.extend(!0,{},i.options.date,{onSet:function(e){void 0!==e.select&&(i.$date.attr("data-value",e.select),!1!==i.options.autoSetTimeOnDateChange&&i.$time&&!i.$time.pickatime("picker").get("select")&&i.$time.pickatime("picker").set("select",i.options.autoSetTimeOnDateChange),!1!==i.options.time&&""===i.$time.attr("data-value")||i.updateValue.call(i)),e.hasOwnProperty("clear")&&(i.$el.val(""),i.$date.attr("data-value",""))}}))),!1!==i.options.time&&(i.options.time.formatSubmit="HH:i",i.$time=s('<input type="text"/>').attr("placeholder",i.options.placeholderTime).attr("data-value",o).addClass(i.options.classTimeName).appendTo(s("<div/>").addClass(i.options.classTimeWrapperName).appendTo(i.$wrapper)).pickatime(s.extend(!0,{},i.options.time,{onSet:function(e){void 0!==e.select&&(i.$time.attr("data-value",e.select),!1!==i.options.date&&""===i.$date.attr("data-value")||i.updateValue.call(i)),e.hasOwnProperty("clear")&&(i.$el.val(""),i.$time.attr("data-value",""))}})),"string"==typeof o&&"00"===o.substring(0,2)&&(i.$time.pickatime("picker").set("select",o.split(":")),i.$time.attr("data-value",o))),!1!==i.options.date&&!1!==i.options.time&&i.options.timezone&&(i.$separator=s("<span/>").addClass(i.options.classSeparatorName).html(" "===i.options.separator?"&nbsp;":i.options.separator).appendTo(i.$wrapper)),null!==i.options.timezone&&(i.$timezone=s('<input type="text"/>').addClass(i.options.classTimezoneName).appendTo(s("<div/>").addClass(i.options.classTimezoneWrapperName).appendTo(i.$wrapper)).patternSelect2(s.extend(!0,{placeholder:i.options.placeholderTimezone,width:"10em"},i.options.timezone,{multiple:!1})).on("change",function(e){void 0!==e.val&&(i.$timezone.attr("data-value",e.val),!1!==i.options.date&&""===i.$date.attr("data-value")||!1!==i.options.time&&""===i.$time.attr("data-value")||i.updateValue.call(i))}),(e=i.options.timezone.default)&&(i.options.timezone.data.some(function(e){return t=e.text===i.options.timezone.default}),t&&(i.$timezone.attr("data-value",e),i.$timezone.parent().find(".select2-chosen").text(e))),1===i.options.timezone.data.length&&(i.$timezone.attr("data-value",i.options.timezone.data[0].text),i.$timezone.parent().find(".select2-chosen").text(i.options.timezone.data[0].text),i.$timezone.select2("enable",!1))),a.bool(i.options.today)&&(i.$now=s('<button type="button" class="btn btn-xs btn-info" title="'+i.options.today+'"><span class="glyphicon glyphicon-time"></span></button>').addClass(i.options.classNowName).on("click",function(e){e.preventDefault();e=new Date;i.$date&&i.$date.data("pickadate").set("select",e),i.$time&&i.$time.data("pickatime").set("select",e),i.emit("updated")}).appendTo(i.$wrapper)),a.bool(i.options.clear)&&(i.$clear=s('<button type="button" class="btn btn-xs btn-danger" title="'+i.options.clear+'"><span class="glyphicon glyphicon-trash"></span></button>').addClass(i.options.classClearName).on("click",function(e){e.preventDefault(),i.$date&&i.$date.data("pickadate").clear(),i.$time&&i.$time.data("pickatime").clear(),i.emit("updated")}).appendTo(i.$wrapper))},updateValue:function(){var e,t,i,n=this,o="";!1!==n.options.date&&(t=n.$date.data("pickadate").component,i=n.$date.data("pickadate").get("select"),e=t.formats.toString,i&&(o+=e.apply(t,[n.options.date.formatSubmit,i]))),!1!==n.options.date&&!1!==n.options.time&&(o+=" "),!1!==n.options.time&&(e=n.$time.data("pickatime").component,t=n.$time.data("pickatime").get("select"),i=e.formats.toString,t&&(o+=i.apply(e,["HH:i",t]))),null!==n.options.timezone&&(i=" "+n.$timezone.attr("data-value"))&&(o+=i),n.$el.val(o),n.emit("updated")}})}),require(["mockup-patterns-inlinevalidation","mockup-patterns-pickadate","mockup-patterns-select2"],function(){}),define("/home/maik/develop/plone/src/collective.anonymouseditpatterns/src/collective/anonymouseditpatterns/browser/static/js/anonymouseditpatterns.js",function(){});
//# sourceMappingURL=anonymouseditpatterns-compiled.min.js.map